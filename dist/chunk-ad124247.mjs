import"./chunk-f8a6947c.mjs";import"./chunk-5f1245ff.mjs";import{a as mapEventBindings}from"./chunk-910f3205.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";import{a as commonjsGlobal,b as commonjsRequire,c as unwrapExports,d as createCommonjsModule}from"./chunk-eae5b219.mjs";import"./chunk-e85142ea.mjs";import"./chunk-bd824939.mjs";import{a as canSymbol}from"./chunk-b37d91a1.mjs";import{a as CID}from"./chunk-cb265e10.mjs";import{a as assign}from"./chunk-75bea8d8.mjs";import{a as process$1}from"./chunk-bacf0c54.mjs";import"./chunk-805ffcb4.mjs";import{a as dev}from"./chunk-585d4076.mjs";import{a as namespace}from"./chunk-3b4c7b38.mjs";import{a as addTypeEvents}from"./chunk-b2e1c1d8.mjs";import{a as Construct}from"./chunk-a97d251a.mjs";import"./chunk-fa6b878a.mjs";import{a as observeReader}from"./chunk-0877ccb7.mjs";import"./chunk-ce868a5a.mjs";import{a as singleReference}from"./chunk-072ec069.mjs";import"./chunk-862b179d.mjs";import{a as ObservationRecorder}from"./chunk-8811d387.mjs";import{a as compute}from"./chunk-72b5b2d5.mjs";import{a as queues}from"./chunk-12ed728f.mjs";var CIDSet,bubble={bind:function(e,t){if(!e.__inSetup){var n,i=bubble.events(e,t),s=i.length;e._bubbleBindings||(e._bubbleBindings={});for(var a=0;a<s;a++)n=i[a],e._bubbleBindings[n]?e._bubbleBindings[n]++:(e._bubbleBindings[n]=1,bubble.childrenOf(e,n))}},unbind:function(e,t){for(var n,i=bubble.events(e,t),s=i.length,a=0;a<s;a++)n=i[a],e._bubbleBindings&&e._bubbleBindings[n]--,e._bubbleBindings&&!e._bubbleBindings[n]&&(delete e._bubbleBindings[n],bubble.teardownChildrenFrom(e,n),0===canReflect.size(e._bubbleBindings)&&delete e._bubbleBindings)},add:function(e,t,n){if(canReflect.isObservableLike(t)&&canReflect.isMapLike(t)&&e._bubbleBindings)for(var i in e._bubbleBindings)e._bubbleBindings[i]&&(bubble.teardownFromParent(e,t,i),bubble.toParent(t,e,n,i))},addMany:function(e,t){for(var n=0,i=t.length;n<i;n++)bubble.add(e,t[n],n)},remove:function(e,t){if(canReflect.isObservableLike(t)&&canReflect.isMapLike(t)&&e._bubbleBindings)for(var n in e._bubbleBindings)e._bubbleBindings[n]&&bubble.teardownFromParent(e,t,n)},removeMany:function(e,t){for(var n=0,i=t.length;n<i;n++)bubble.remove(e,t[n])},set:function(e,t,n,i){return canReflect.isObservableLike(n)&&canReflect.isMapLike(n)&&bubble.add(e,n,t),canReflect.isObservableLike(i)&&canReflect.isMapLike(i)&&bubble.remove(e,i),n},events:function(e,t){return e.constructor._bubbleRule(t,e)},toParent:function(e,t,n,i){mapEventBindings.listenTo.call(t,e,i,function(){var s=canReflect.toArray(arguments),a=s.shift();s[0]=(canReflect.isObservableLike(t)&&canReflect.isListLike(t)?t.indexOf(e):n)+(s[0]?"."+s[0]:""),a.triggeredNS=a.triggeredNS||{},a.triggeredNS[t._cid]||(a.triggeredNS[t._cid]=!0,mapEventBindings.dispatch.call(t,a,s),"change"===i&&mapEventBindings.dispatch.call(t,s[0],[s[2],s[3]]))})},childrenOf:function(e,t){e._each(function(n,i){n&&n.bind&&bubble.toParent(n,e,i,t)})},teardownFromParent:function(e,t,n){t&&t.unbind&&mapEventBindings.stopListening.call(e,t,n)},teardownChildrenFrom:function(e,t){e._each(function(n){bubble.teardownFromParent(e,n,t)})},isBubbling:function(e,t){return e._bubbleBindings&&e._bubbleBindings[t]}},bubble_1=bubble,mapHelpers_1=createCommonjsModule(function(e,t){var n,i=null,s=function(){for(var e in i)i[e].added&&delete i[e].obj._cid;i=null},a={attrParts:function(e,t){return t?[e]:"object"==typeof e?e:(""+e).split(".")},canMakeObserve:function(e){return e&&!canReflect.isPromise(e)&&(Array.isArray(e)||canReflect.isPlainObject(e))},reflectSerialize:function(e){return this.forEach(function(t,n){void 0!==(t=this.___serialize?this.___serialize(n,t):canReflect.serialize(t))&&(e[n]=t)},this),e},reflectUnwrap:function(e){return this.forEach(function(t,n){void 0!==t&&(e[n]=canReflect.unwrap(t))}),e},removeSpecialKeys:function(e){return e&&["_data","constructor","_cid","__bindEvents"].forEach(function(t){delete e[t]}),e},serialize:(n=null,function(e,t,i){var s=CID(e),r=!1;return n||(r=!0,n={attr:{},serialize:{}}),n[t][s]=i,e.forEach(function(s,r){var o,c=canReflect.isObservableLike(s)&&n[t][CID(s)];void 0!==(o=c||(e["___"+t]?e["___"+t](r,s):a.getValue(e,r,s,t)))&&(i[r]=o)}),r&&(n=null),i}),getValue:function(e,t,n,i){return"attr"===i&&(i=canSymbol.for("can.getValue")),canReflect.isObservableLike(n)&&n[i]?n[i]():n},define:null,addComputedAttr:function(e,t,n){e._computedAttrs[t]={compute:n,count:0,handler:function(n,i){e._triggerChange(t,"set",n,i)}}},addToMap:function(e,t){var n;i||(n=s,i={});var a=e._cid,r=CID(e);return i[r]||(i[r]={obj:e,instance:t,added:!a}),n},getMapFromObject:function(e){return i&&i[e._cid]&&i[e._cid].instance},twoLevelDeepExtend:function(e,t){for(var n in t)e[n]=e[n]||{},assign(e[n],t[n])}};e.exports=a}),canTypes=createCommonjsModule(function(e){var t={isMapLike:function(e){return"production"!==process$1.env.NODE_ENV&&dev.warn("can-types.isMapLike(obj) is deprecated, please use `canReflect.isObservableLike(obj) && canReflect.isMapLike(obj)` instead."),canReflect.isObservableLike(e)&&canReflect.isMapLike(e)},isListLike:function(e){return"production"!==process$1.env.NODE_ENV&&dev.warn("can-types.isListLike(obj) is deprecated, please use `canReflect.isObservableLike(obj) && canReflect.isListLike(obj)` instead."),canReflect.isObservableLike(e)&&canReflect.isListLike(e)},isPromise:function(e){return"production"!==process$1.env.NODE_ENV&&dev.warn("can-types.isPromise is deprecated, please use canReflect.isPromise instead."),canReflect.isPromise(e)},isConstructor:function(e){return"production"!==process$1.env.NODE_ENV&&dev.warn("can-types.isConstructor is deprecated, please use canReflect.isConstructorLike instead."),canReflect.isConstructorLike(e)},isCallableForValue:function(e){return"production"!==process$1.env.NODE_ENV&&dev.warn("can-types.isCallableForValue(obj) is deprecated, please use `canReflect.isFunctionLike(obj) && !canReflect.isConstructorLike(obj)` instead."),e&&canReflect.isFunctionLike(e)&&!canReflect.isConstructorLike(e)},isCompute:function(e){return"production"!==process$1.env.NODE_ENV&&dev.warn("can-types.isCompute is deprecated."),e&&e.isComputed},get iterator(){return"production"!==process$1.env.NODE_ENV&&dev.warn('can-types.iterator is deprecated, use `canSymbol.iterator || canSymbol.for("iterator")` instead.'),canSymbol.iterator||canSymbol.for("iterator")},DefaultMap:null,DefaultList:null,queueTask:function(e){var t=e[2]||[];e[0].apply(e[1],t)},wrapElement:function(e){return e},unwrapElement:function(e){return e}};if(namespace.types)throw new Error("You can't have two versions of can-types, check your dependencies");e.exports=namespace.types=t}),helpers={each:function(e,t,n){for(var i in e)t.call(n,e[i],i);return e}},getCID=CID.get;"undefined"!=typeof Set?CIDSet=Set:((CIDSet=function(){this.values={}}).prototype.add=function(e){this.values[getCID(e)]=e},CIDSet.prototype.delete=function(e){var t=getCID(e)in this.values;return t&&delete this.values[getCID(e)],t},CIDSet.prototype.forEach=function(e,t){helpers.each(this.values,e,t)},CIDSet.prototype.has=function(e){return getCID(e)in this.values},CIDSet.prototype.clear=function(){return this.values={}},Object.defineProperty(CIDSet.prototype,"size",{get:function(){var e=0;return helpers.each(this.values,function(){e++}),e}}));var CIDMap,set=CIDSet,getCID$1=CID.get;"undefined"!=typeof Map?CIDMap=Map:((CIDMap=function(){this.values={}}).prototype.set=function(e,t){this.values[getCID$1(e)]={key:e,value:t}},CIDMap.prototype.delete=function(e){var t=getCID$1(e)in this.values;return t&&delete this.values[getCID$1(e)],t},CIDMap.prototype.forEach=function(e,t){helpers.each(this.values,function(n){return e.call(t||this,n.value,n.key,this)},this)},CIDMap.prototype.has=function(e){return getCID$1(e)in this.values},CIDMap.prototype.get=function(e){var t=this.values[getCID$1(e)];return t&&t.value},CIDMap.prototype.clear=function(){return this.values={}},Object.defineProperty(CIDMap.prototype,"size",{get:function(){var e=0;return helpers.each(this.values,function(){e++}),e}}));var map=CIDMap,unobservable={constructor:!0},hasOwnProperty={}.hasOwnProperty,Map$1=Construct.extend({setup:function(e){if(Construct.setup.apply(this,arguments),this._computedPropertyNames=[],Map$1){for(var t in addTypeEvents(this),this[canSymbol.for("can.defineInstanceKey")]=function(e,t){void 0!==t.value&&(this.defaults[e]=t.value),!1===t.enumerable&&(this.enumerable[e]=!1)},"production"!==process$1.env.NODE_ENV&&(this.prototype.define&&!mapHelpers_1.define&&dev.warn("can/map/define is not included, yet there is a define property used. You may want to add this plugin."),this.define&&!mapHelpers_1.define&&dev.warn("The define property should be on the map's prototype properties, not the static properties. Also, can/map/define is not included.")),this.defaults||(this.defaults={}),this.enumerable||(this.enumerable={}),this.prototype)"define"!==t&&"constructor"!==t&&("function"!=typeof this.prototype[t]||this.prototype[t].prototype instanceof Construct)?this.defaults[t]=this.prototype[t]:canReflect.isObservableLike(this.prototype[t])&&this._computedPropertyNames.push(t);mapHelpers_1.define&&mapHelpers_1.define(this,e.prototype.define)}},shortName:"Map",_bubbleRule:function(e){return"change"===e||e.indexOf(".")>=0?["change"]:[]},addEventListener:mapEventBindings.addEventListener,removeEventListener:mapEventBindings.removeEventListener,keys:function(e){return canReflect.getOwnEnumerableKeys(e)}},{setup:function(e){canReflect.isObservableLike(e)&&"function"==typeof e.serialize&&(e=e.serialize()),this._data=Object.create(null),CID(this,".map"),this._setupComputedProperties();var t=e&&mapHelpers_1.addToMap(e,this),n=this._setupDefaults(e),i=assign(canReflect.assignDeep({},n),e);this.attr(i),t&&t()},_setupComputedProperties:function(){this._computedAttrs=Object.create(null);for(var e=this.constructor._computedPropertyNames,t=0,n=e.length;t<n;t++){var i=e[t];mapHelpers_1.addComputedAttr(this,i,this[i])}},_setupDefaults:function(){return this.constructor.defaults||{}},attr:function(e,t){var n=typeof e;return void 0===e?this._getAttrs():"string"!==n&&"number"!==n?this._setAttrs(e,t):1===arguments.length?this._get(e):(this._set(e+"",t),this)},_get:function(e){var t=(e+="").indexOf(".");if(t>=0){var n=this.___get(e);if(void 0!==n)return ObservationRecorder.add(this,e),n;var i=e.substr(0,t),s=e.substr(t+1),a=this.__get(i);return a&&canReflect.getKeyValue(a,s)}return this.__get(e)},__get:function(e){return unobservable[e]||this._computedAttrs[e]||ObservationRecorder.add(this,e),this.___get(e)},___get:function(e){if(void 0!==e){var t=this._computedAttrs[e];return t?canReflect.getValue(t.compute):hasOwnProperty.call(this._data,e)?this._data[e]:void 0}return this._data},_set:function(e,t,n){var i,s=(e+="").indexOf(".");if(s>=0&&!n){var a=e.substr(0,s),r=e.substr(s+1);i=this.__inSetup?void 0:this.___get(a),canReflect.isMapLike(i)?canReflect.setKeyValue(i,r,t):(i=this.__inSetup?void 0:this.___get(e),this.__convert&&(t=this.__convert(e,t)),this.__set(e,this.__type(t,e),i))}else i=this.__inSetup?void 0:this.___get(e),this.__convert&&(t=this.__convert(e,t)),this.__set(e,this.__type(t,e),i)},__type:function(e,t){if("object"==typeof e&&!canReflect.isObservableLike(e)&&mapHelpers_1.canMakeObserve(e)&&!canReflect.isListLike(e)){var n=mapHelpers_1.getMapFromObject(e);return n||new(this.constructor.Map||Map$1)(e)}return e},__set:function(e,t,n){if(t!==n||!Object.prototype.hasOwnProperty.call(this._data,e)){var i=this._computedAttrs[e],s=i||void 0!==n||hasOwnProperty.call(this.___get(),e)?"set":"add";this.___set(e,"object"==typeof t?bubble_1.set(this,e,t,n):t),i&&i.count||this._triggerChange(e,s,t,n),"object"==typeof n&&bubble_1.teardownFromParent(this,n)}},___set:function(e,t){var n=this._computedAttrs[e];n?canReflect.setValue(n.compute,t):this._data[e]=t,"function"==typeof this.constructor.prototype[e]||n||(this[e]=t)},removeAttr:function(e){return this._remove(e)},_remove:function(e){var t=mapHelpers_1.attrParts(e),n=t.shift(),i=this.___get(n);return t.length&&i?canReflect.deleteKeyValue(i,t.join(".")):("string"==typeof e&&~e.indexOf(".")&&(n=e),this.__remove(n,i),i)},__remove:function(e,t){e in this._data&&(this.___remove(e),this._triggerChange(e,"remove",void 0,t))},___remove:function(e){delete this._data[e],e in this.constructor.prototype||delete this[e]},___serialize:function(e,t){return this._legacyAttrBehavior?mapHelpers_1.getValue(this,e,t,"serialize"):canReflect.serialize(t,map)},_getAttrs:function(){return this._legacyAttrBehavior?mapHelpers_1.serialize(this,"attr",{}):canReflect.unwrap(this,map)},_setAttrs:function(e,t){return this._legacyAttrBehavior?this.__setAttrs(e,t):(!0===t||"true"===t?this[canSymbol.for("can.updateDeep")](e):this[canSymbol.for("can.assignDeep")](e),this)},__setAttrs:function(e,t){e=assign({},e);var n,i,s=this;for(n in queues.batch.start(),this._each(function(n,a){"_cid"!==a&&(void 0!==(i=e[a])?(s.__convert&&(i=s.__convert(a,i)),canTypes.isMapLike(n)&&mapHelpers_1.canMakeObserve(i)?!0===t?canReflect.updateDeep(n,i):canReflect.assignDeep(n,i):n!==i&&s.__set(a,s.__type(i,a),n),delete e[a]):t&&s.removeAttr(a))}),e)"_cid"!==n&&(i=e[n],this._set(n,i,!0));return queues.batch.stop(),this},serialize:function(){return canReflect.serialize(this,map)},_triggerChange:function(e,t,n,i,s){queues.batch.start(),bubble_1.isBubbling(this,"change")&&mapEventBindings.dispatch.call(this,{type:"change",target:this,batchNum:s},[e,t,n,i]),mapEventBindings.dispatch.call(this,{type:e,target:this,batchNum:s,patches:[{type:"set",key:e,value:n}]},[n,i]),"remove"!==t&&"add"!==t||mapEventBindings.dispatch.call(this,{type:"__keys",target:this,batchNum:s}),queues.batch.stop()},compute:function(e){if("function"==typeof this.constructor.prototype[e])return compute(this[e],this);var t=observeReader.reads(e),n=t.length-1;return compute(function(i){if(!arguments.length)return observeReader.get(this,e);observeReader.write(this,t[n].key,i,{})},this)},forEach:function(e,t){for(var n,i,s=canReflect.getOwnEnumerableKeys(this),a=0,r=s.length;a<r&&(n=s[a],i=this.attr(n),!1!==e.call(t||i,i,n,this));a++);return this},_each:function(e){var t=this.___get();for(var n in t)hasOwnProperty.call(t,n)&&e(t[n],n)},dispatch:mapEventBindings.dispatch});mapEventBindings(Map$1.prototype),Map$1.prototype.addEventListener=function(e,t){var n=this._computedAttrs&&this._computedAttrs[e];return n&&n.compute&&(n.count?n.count++:(n.count=1,canReflect.onValue(n.compute,n.handler,"notify"))),bubble_1.bind(this,e),mapEventBindings.addEventListener.apply(this,arguments)},Map$1.prototype.removeEventListener=function(e,t){var n=this._computedAttrs&&this._computedAttrs[e];return n&&(1===n.count?(n.count=0,canReflect.offValue(n.compute,n.handler)):n.count--),bubble_1.unbind(this,e),mapEventBindings.removeEventListener.apply(this,arguments)},Map$1.prototype.on=Map$1.prototype.bind=Map$1.prototype.addEventListener,Map$1.prototype.off=Map$1.prototype.unbind=Map$1.prototype.removeEventListener,Map$1.on=Map$1.bind=Map$1.addEventListener,Map$1.off=Map$1.unbind=Map$1.removeEventListener,canReflect.assignSymbols(Map$1.prototype,{"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":Map$1.prototype._get,"can.setKeyValue":Map$1.prototype._set,"can.deleteKeyValue":Map$1.prototype._remove,"can.getOwnEnumerableKeys":function(){this.__inSetup||ObservationRecorder.add(this,"__keys");var e=this.constructor.enumerable;return e?Object.keys(this._data).filter(function(t){return!1!==e[t]},this):Object.keys(this._data)},"can.assignDeep":function(e){queues.batch.start(),canReflect.assignDeepMap(this,mapHelpers_1.removeSpecialKeys(canReflect.assignMap({},e))),queues.batch.stop()},"can.updateDeep":function(e){queues.batch.start(),canReflect.updateDeepMap(this,mapHelpers_1.removeSpecialKeys(canReflect.assignMap({},e))),queues.batch.stop()},"can.unwrap":mapHelpers_1.reflectUnwrap,"can.serialize":mapHelpers_1.reflectSerialize,"can.onKeyValue":function(e,t,n){var i=function(e,n,i){t.call(this,n,i)};singleReference.set(t,this,i,e),this.addEventListener(e,i,n)},"can.offKeyValue":function(e,t,n){this.removeEventListener(e,singleReference.getAndDelete(t,this,e),n)},"can.keyHasDependencies":function(e){return!!(this._computedAttrs&&this._computedAttrs[e]&&this._computedAttrs[e].compute)},"can.getKeyDependencies":function(e){var t;return this._computedAttrs&&this._computedAttrs[e]&&this._computedAttrs[e].compute&&((t={}).valueDependencies=new set,t.valueDependencies.add(this._computedAttrs[e].compute)),t}}),canTypes.DefaultMap||(canTypes.DefaultMap=Map$1);var canMap=namespace.Map=Map$1;export{canMap as a,bubble_1 as b,mapHelpers_1 as c,canTypes as d,map as e,canMap as f};
//# sourceMappingURL=chunk-ad124247.js.map
