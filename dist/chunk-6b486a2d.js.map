{"version":3,"file":"chunk-6b486a2d.js","sources":["../node_modules/can-view-target/can-view-target.js"],"sourcesContent":["\"use strict\";\n/* jshint maxdepth:7 */\n/* jshint latedef:false */\nvar getDocument = require('can-globals/document/document');\nvar domMutate = require('can-dom-mutate/node');\nvar namespace = require('can-namespace');\nvar MUTATION_OBSERVER = require('can-globals/mutation-observer/mutation-observer');\n\n// if an object or a function\n// convert into what it should look like\n// then the modification can happen in place\n// but it has to have more than the current node\n// blah!\nvar processNodes = function(nodes, paths, location, document){\n\tvar frag = document.createDocumentFragment();\n\n\tfor(var i = 0, len = nodes.length; i < len; i++) {\n\t\tvar node = nodes[i];\n\t\tfrag.appendChild( processNode(node,paths,location.concat(i), document) );\n\t}\n\treturn frag;\n},\n\tkeepsTextNodes =  typeof document !== \"undefined\" && (function(){\n\t\tvar testFrag = document.createDocumentFragment();\n\t\tvar div = document.createElement(\"div\");\n\n\t\tdiv.appendChild(document.createTextNode(\"\"));\n\t\tdiv.appendChild(document.createTextNode(\"\"));\n\t\ttestFrag.appendChild(div);\n\n\t\tvar cloned  = testFrag.cloneNode(true);\n\n\t\treturn cloned.firstChild.childNodes.length === 2;\n\t})(),\n\tclonesWork = typeof document !== \"undefined\" && (function(){\n\t\t// Since html5shiv is required to support custom elements, assume cloning\n\t\t// works in any browser that doesn't have html5shiv\n\n\t\t// Clone an element containing a custom tag to see if the innerHTML is what we\n\t\t// expect it to be, or if not it probably was created outside of the document's\n\t\t// namespace.\n\t\tvar el = document.createElement('a');\n\t\tel.innerHTML = \"<xyz></xyz>\";\n\t\tvar clone = el.cloneNode(true);\n\t\tvar works = clone.innerHTML === \"<xyz></xyz>\";\n\t\tvar MO, observer;\n\n\t\tif(works) {\n\t\t\t// Cloning text nodes with dashes seems to create multiple nodes in IE11 when\n\t\t\t// MutationObservers of subtree modifications are used on the documentElement.\n\t\t\t// Since this is not what we expect we have to include detecting it here as well.\n\t\t\tel = document.createDocumentFragment();\n\t\t\tel.appendChild(document.createTextNode('foo-bar'));\n\n\t\t\tMO = MUTATION_OBSERVER();\n\n\t\t\tif (MO) {\n\t\t\t\tobserver = new MO(function() {});\n\t\t\t\tobserver.observe(document.documentElement, { childList: true, subtree: true });\n\n\t\t\t\tclone = el.cloneNode(true);\n\n\t\t\t\tobserver.disconnect();\n\t\t\t} else {\n\t\t\t\tclone = el.cloneNode(true);\n\t\t\t}\n\n\t\t\treturn clone.childNodes.length === 1;\n\t\t}\n\n\t\treturn works;\n\t})(),\n\tnamespacesWork = typeof document !== \"undefined\" && !!document.createElementNS;\n\n/**\n * @function cloneNode\n * @hide\n *\n * A custom cloneNode function to be used in browsers that properly support cloning\n * of custom tags (IE8 for example). Fixes it by doing some manual cloning that\n * uses innerHTML instead, which has been shimmed.\n *\n * @param {DocumentFragment} frag A document fragment to clone\n * @return {DocumentFragment} a new fragment that is a clone of the provided argument\n */\nvar cloneNode = clonesWork ?\n\tfunction(el){\n\t\treturn el.cloneNode(true);\n\t} :\n\tfunction(node){\n\t\tvar document = node.ownerDocument;\n\t\tvar copy;\n\n\t\tif(node.nodeType === 1) {\n\t\t\tif(node.namespaceURI !== 'http://www.w3.org/1999/xhtml' && namespacesWork && document.createElementNS) {\n\t\t\t\tcopy = document.createElementNS(node.namespaceURI, node.nodeName);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcopy = document.createElement(node.nodeName);\n\t\t\t}\n\t\t} else if(node.nodeType === 3){\n\t\t\tcopy = document.createTextNode(node.nodeValue);\n\t\t} else if(node.nodeType === 8) {\n\t\t\tcopy = document.createComment(node.nodeValue);\n\t\t} else if(node.nodeType === 11) {\n\t\t\tcopy = document.createDocumentFragment();\n\t\t}\n\n\t\tif(node.attributes) {\n\t\t\tvar attributes = node.attributes;\n\t\t\tfor (var i = 0; i < attributes.length; i++) {\n\t\t\t\tvar attribute = attributes[i];\n\t\t\t\tif (attribute && attribute.specified) {\n\t\t\t\t\tdomMutate.setAttribute.call(copy, attribute.nodeName || attribute.name, attribute.nodeValue || attribute.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(node && node.firstChild) {\n\t\t\tvar child = node.firstChild;\n\n\t\t\twhile(child) {\n\t\t\t\tcopy.appendChild( cloneNode(child) );\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t}\n\n\t\treturn copy;\n\t};\n\nfunction processNode(node, paths, location, document){\n\tvar callback,\n\t\tloc = location,\n\t\tnodeType = typeof node,\n\t\tel,\n\t\tp,\n\t\ti , len;\n\tvar getCallback = function(){\n\t\tif(!callback) {\n\t\t\tcallback  = {\n\t\t\t\tpath: location,\n\t\t\t\tcallbacks: []\n\t\t\t};\n\t\t\tpaths.push(callback);\n\t\t\tloc = [];\n\t\t}\n\t\treturn callback;\n\t};\n\n\tif(nodeType === \"object\") {\n\t\tif( node.tag ) {\n\t\t\tif(namespacesWork && node.namespace) {\n\t\t\t\tel = document.createElementNS(node.namespace, node.tag);\n\t\t\t} else {\n\t\t\t\tel = document.createElement(node.tag);\n\t\t\t}\n\n\t\t\tif(node.attrs) {\n\t\t\t\tfor(var attrName in node.attrs) {\n\t\t\t\t\tvar value = node.attrs[attrName];\n\t\t\t\t\tif(typeof value === \"function\"){\n\t\t\t\t\t\tgetCallback().callbacks.push({\n\t\t\t\t\t\t\tcallback:  value\n\t\t\t\t\t\t});\n\t\t\t\t\t} else  {\n\t\t\t\t\t\tdomMutate.setAttribute.call(el, attrName, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(node.attributes) {\n\t\t\t\tfor(i = 0, len = node.attributes.length; i < len; i++ ) {\n\t\t\t\t\tgetCallback().callbacks.push({callback: node.attributes[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(node.children && node.children.length) {\n\t\t\t\t// add paths\n\t\t\t\tif(callback) {\n\t\t\t\t\tp = callback.paths = [];\n\t\t\t\t} else {\n\t\t\t\t\tp = paths;\n\t\t\t\t}\n\n\t\t\t\tel.appendChild( processNodes(node.children, p, loc, document) );\n\t\t\t}\n\t\t} else if(node.comment) {\n\t\t\tel = document.createComment(node.comment);\n\n\t\t\tif(node.callbacks) {\n\t\t\t\tfor(i = 0, len = node.attributes.length; i < len; i++ ) {\n\t\t\t\t\tgetCallback().callbacks.push({callback: node.callbacks[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t} else if(nodeType === \"string\"){\n\n\t\tel = document.createTextNode(node);\n\n\t} else if(nodeType === \"function\") {\n\n\t\tif(keepsTextNodes) {\n\t\t\tel = document.createTextNode(\"\");\n\t\t\tgetCallback().callbacks.push({\n\t\t\t\tcallback: node\n\t\t\t});\n\t\t} else {\n\t\t\tel = document.createComment(\"~\");\n\t\t\tgetCallback().callbacks.push({\n\t\t\t\tcallback: function(){\n\t\t\t\t\tvar el = document.createTextNode(\"\");\n\t\t\t\t\tdomMutate.replaceChild.call(this.parentNode, el, this);\n\t\t\t\t\treturn node.apply(el,arguments );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t}\n\treturn el;\n}\n\nfunction getCallbacks(el, pathData, elementCallbacks){\n\tvar path = pathData.path,\n\t\tcallbacks = pathData.callbacks,\n\t\tpaths = pathData.paths,\n\t\tchild = el,\n\t\tpathLength = path ? path.length : 0,\n\t\tpathsLength = paths ? paths.length : 0;\n\n\tfor(var i = 0; i < pathLength; i++) {\n\t\tchild = child.childNodes.item(path[i]);\n\t}\n\n\tfor( i= 0 ; i < pathsLength; i++) {\n\t\tgetCallbacks(child, paths[i], elementCallbacks);\n\t}\n\n\telementCallbacks.push({element: child, callbacks: callbacks});\n}\n\nfunction hydrateCallbacks(callbacks, args) {\n\tvar len = callbacks.length,\n\t\tcallbacksLength,\n\t\tcallbackElement,\n\t\tcallbackData;\n\n\tfor(var i = 0; i < len; i++) {\n\t\tcallbackData = callbacks[i];\n\t\tcallbacksLength = callbackData.callbacks.length;\n\t\tcallbackElement = callbackData.element;\n\t\tfor(var c = 0; c < callbacksLength; c++) {\n\t\t\tcallbackData.callbacks[c].callback.apply(callbackElement, args);\n\t\t}\n\t}\n}\n\nfunction makeTarget(nodes, doc){\n\tvar paths = [];\n\tvar frag = processNodes(nodes, paths, [], doc || getDocument());\n\treturn {\n\t\tpaths: paths,\n\t\tclone: frag,\n\t\thydrate: function(){\n\t\t\tvar cloned = cloneNode(this.clone);\n\t\t\tvar args = [];\n\t\t\tfor (var a = 0, ref = args.length = arguments.length; a < ref; a++) {\n\t\t\t\targs[a] = arguments[a];\n\t\t\t} // see https://jsperf.com/nodelist-to-array\n\n\t\t\tvar callbacks = [];\n\t\t\tfor(var i = 0; i < paths.length; i++) {\n\t\t\t\tgetCallbacks(cloned, paths[i], callbacks);\n\t\t\t}\n\t\t\thydrateCallbacks(callbacks, args);\n\n\t\t\treturn cloned;\n\t\t}\n\t};\n}\nmakeTarget.keepsTextNodes = keepsTextNodes;\nmakeTarget.cloneNode = cloneNode;\n\nnamespace.view = namespace.view || {};\nmodule.exports = namespace.view.target = makeTarget;\n"],"names":["processNodes","nodes","paths","location","document","frag","createDocumentFragment","i","len","length","node","appendChild","processNode","concat","keepsTextNodes","testFrag","div","createElement","createTextNode","cloneNode","firstChild","childNodes","clonesWork","el","innerHTML","MO","observer","clone","works","MUTATION_OBSERVER","observe","documentElement","childList","subtree","disconnect","namespacesWork","createElementNS","copy","ownerDocument","nodeType","namespaceURI","nodeName","nodeValue","createComment","attributes","attribute","specified","domMutate","setAttribute","call","name","value","child","nextSibling","callback","p","loc","getCallback","path","callbacks","push","tag","namespace","attrs","attrName","children","comment","replaceChild","this","parentNode","apply","arguments","getCallbacks","pathData","elementCallbacks","pathLength","pathsLength","item","element","hydrateCallbacks","args","callbacksLength","callbackElement","callbackData","c","makeTarget","doc","getDocument","hydrate","cloned","a","ref","view","target"],"mappings":"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"}