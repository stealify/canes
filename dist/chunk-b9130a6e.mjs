import{a as process$1}from"./chunk-bacf0c54.mjs";import{a as Construct}from"./chunk-a97d251a.mjs";import{a as define}from"./chunk-707fbcc4.mjs";import"./chunk-862b179d.mjs";import{a as addTypeEvents}from"./chunk-b2e1c1d8.mjs";import"./chunk-fa6b878a.mjs";import{a as canLog}from"./chunk-a661b1ce.mjs";import{a as dev}from"./chunk-585d4076.mjs";import{a as defineHelpers}from"./chunk-dc356f62.mjs";import"./chunk-bd824939.mjs";import{a as diff}from"./chunk-3f0a7243.mjs";import"./chunk-805ffcb4.mjs";import"./chunk-5f1245ff.mjs";import{a as canSymbol}from"./chunk-b37d91a1.mjs";import{a as singleReference}from"./chunk-072ec069.mjs";import{a as queues}from"./chunk-12ed728f.mjs";import{a as ObservationRecorder}from"./chunk-8811d387.mjs";import{a as assign}from"./chunk-75bea8d8.mjs";import{a as namespace}from"./chunk-3b4c7b38.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";var make=define.make,splice=[].splice,runningNative=!1,identity=function(e){return e},localOnPatchesSymbol="can.patches",makeFilterCallback=function(e){return function(t){for(var n in e)if(t[n]!==e[n])return!1;return!0}},onKeyValue=define.eventsProto[canSymbol.for("can.onKeyValue")],offKeyValue=define.eventsProto[canSymbol.for("can.offKeyValue")],getSchemaSymbol=canSymbol.for("can.getSchema");function getSchema(){var e=this.prototype._define.definitions,t={type:"list",keys:{}};return(t=define.updateSchemaKeys(t,e)).keys["#"]&&(t.values=e["#"].Type,delete t.keys["#"]),t}var DefineList=Construct.extend("DefineList",{setup:function(e){if(DefineList){addTypeEvents(this);var t=this.prototype,n=define(t,t,e.prototype._define);define.makeDefineInstanceKey(this,n);var i=n.definitions["#"]||n.defaultDefinition;i&&(i.Type?this.prototype.__type=make.set.Type("*",i.Type,identity):i.type&&(this.prototype.__type=make.set.type("*",i.type,identity))),this[getSchemaSymbol]=getSchema}}},{setup:function(e){this._define||(Object.defineProperty(this,"_define",{enumerable:!1,value:{definitions:{length:{type:"number"},_length:{type:"number"}}}}),Object.defineProperty(this,"_data",{enumerable:!1,value:{}})),define.setup.call(this,{},!1),Object.defineProperty(this,"_length",{enumerable:!1,configurable:!0,writable:!0,value:0}),e&&this.splice.apply(this,[0,0].concat(canReflect.toArray(e)))},__type:define.types.observable,_triggerChange:function(e,t,n,i){var s=+e;if(isNaN(s))this.dispatch({type:""+e,target:this},[n,i]);else{var a,r=this._define.definitions["#"];"add"===t?(r&&"function"==typeof r.added&&ObservationRecorder.ignore(r.added).call(this,n,s),a={type:t,patches:[{type:"splice",insert:n,index:s,deleteCount:0}]},"production"!==process$1.env.NODE_ENV&&(a.reasonLog=[canReflect.getName(this),"added",n,"at",s]),this.dispatch(a,[n,s])):"remove"===t?(r&&"function"==typeof r.removed&&ObservationRecorder.ignore(r.removed).call(this,i,s),a={type:t,patches:[{type:"splice",index:s,deleteCount:i.length}]},"production"!==process$1.env.NODE_ENV&&(a.reasonLog=[canReflect.getName(this),"remove",i,"at",s]),this.dispatch(a,[i,s])):this.dispatch(t,[n,s])}},get:function(e){return arguments.length?(isNaN(e)?ObservationRecorder.add(this,e):ObservationRecorder.add(this,"length"),this[e]):canReflect.unwrap(this,Map)},set:function(e,t){if("object"!=typeof e)if("number"==typeof(e=isNaN(+e)||e%1?e:+e)){if("number"==typeof e&&e>this._length-1){var n=new Array(e+1-this._length);return n[n.length-1]=t,this.push.apply(this,n),n}this.splice(e,1,t)}else{defineHelpers.defineExpando(this,e,t)||(this[e]=t)}else"production"!==process$1.env.NODE_ENV&&dev.warn("can-define/list/list.prototype.set is deprecated; please use can-define/list/list.prototype.assign or can-define/list/list.prototype.update instead"),canReflect.isListLike(e)?t?this.replace(e):canReflect.assignList(this,e):canReflect.assignMap(this,e);return this},assign:function(e){return canReflect.isListLike(e)?canReflect.assignList(this,e):canReflect.assignMap(this,e),this},update:function(e){return canReflect.isListLike(e)?canReflect.updateList(this,e):canReflect.updateMap(this,e),this},assignDeep:function(e){return canReflect.isListLike(e)?canReflect.assignDeepList(this,e):canReflect.assignDeepMap(this,e),this},updateDeep:function(e){return canReflect.isListLike(e)?canReflect.updateDeepList(this,e):canReflect.updateDeepMap(this,e),this},_items:function(){var e=[];return this._each(function(t){e.push(t)}),e},_each:function(e){for(var t=0,n=this._length;t<n;t++)e(this[t],t)},splice:function(e,t){var n,i,s,a=canReflect.toArray(arguments),r=[],o=a.length>2,c=this._length;for(e=e||0,n=0,i=a.length-2;n<i;n++)a[s=n+2]=this.__type(a[s],s),r.push(a[s]),this[n+e]!==a[s]&&(o=!1);if(o&&this._length<=r.length)return r;void 0===t&&(t=a[1]=this._length-e),runningNative=!0;var h=splice.apply(this,a);return runningNative=!1,queues.batch.start(),t>0&&this._triggerChange(""+e,"remove",void 0,h),a.length>2&&this._triggerChange(""+e,"add",r,h),this.dispatch("length",[this._length,c]),queues.batch.stop(),h},serialize:function(){return canReflect.serialize(this,Map)}});for(var prop in define.eventsProto)Object.defineProperty(DefineList.prototype,prop,{enumerable:!1,value:define.eventsProto[prop],writable:!0});var eventsProtoSymbols="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(define.eventsProto):[canSymbol.for("can.onKeyValue"),canSymbol.for("can.offKeyValue")];eventsProtoSymbols.forEach(function(e){Object.defineProperty(DefineList.prototype,e,{configurable:!0,enumerable:!1,value:define.eventsProto[e],writable:!0})});var getArgs=function(e){return e[0]&&Array.isArray(e[0])?e[0]:canReflect.toArray(e)};for(var prop in canReflect.eachKey({push:"length",unshift:0},function(e,t){var n=[][t];DefineList.prototype[t]=function(){for(var t,i,s=[],a=e?this._length:0,r=arguments.length;r--;)i=arguments[r],s[r]=this.__type(i,r);return runningNative=!0,t=n.apply(this,s),runningNative=!1,this.comparator&&!s.length||(queues.batch.start(),this._triggerChange(""+a,"add",s,void 0),this.dispatch("length",[this._length,a]),queues.batch.stop()),t}}),canReflect.eachKey({pop:"length",shift:0},function(e,t){var n=[][t];DefineList.prototype[t]=function(){if(this._length){var t,i=getArgs(arguments),s=e&&this._length?this._length-1:0,a=this._length?this._length:0;return runningNative=!0,t=n.apply(this,i),runningNative=!1,queues.batch.start(),this._triggerChange(""+s,"remove",void 0,[t]),this.dispatch("length",[this._length,a]),queues.batch.stop(),t}}}),canReflect.eachKey({map:3,filter:3,reduce:4,reduceRight:4,every:3,some:3},function(e,t){DefineList.prototype[t]=function(){var n=this,i=[].slice.call(arguments,0),s=i[0],a=i[e-1]||n;"object"==typeof s&&(s=makeFilterCallback(s)),i[0]=function(){var t=[].slice.call(arguments,0);return t[e-3]=n.get(t[e-2]),s.apply(a,t)};var r=Array.prototype[t].apply(this,i);return"map"===t?new DefineList(r):"filter"===t?new n.constructor(r):r}}),assign(DefineList.prototype,{indexOf:function(e,t){for(var n=t||0,i=this.length;n<i;n++)if(this.get(n)===e)return n;return-1},lastIndexOf:function(e,t){for(var n=t=void 0===t?this.length-1:t;n>=0;n--)if(this.get(n)===e)return n;return-1},join:function(){return ObservationRecorder.add(this,"length"),[].join.apply(this,arguments)},reverse:function(){var e=[].reverse.call(this._items());return this.replace(e)},slice:function(){ObservationRecorder.add(this,"length");var e=Array.prototype.slice.apply(this,arguments);return new this.constructor(e)},concat:function(){var e=[];return canReflect.eachIndex(arguments,function(t){canReflect.isListLike(t)?(Array.isArray(t)?t:canReflect.toArray(t)).forEach(function(t){e.push(this.__type(t))},this):e.push(this.__type(t))},this),new this.constructor(Array.prototype.concat.apply(canReflect.toArray(this),e))},forEach:function(e,t){for(var n,i=0,s=this.length;i<s&&(n=this.get(i),!1!==e.call(t||n,n,i,this));i++);return this},replace:function(e){var t=diff(this,e);queues.batch.start();for(var n=0,i=t.length;n<i;n++)this.splice.apply(this,[t[n].index,t[n].deleteCount].concat(t[n].insert));return queues.batch.stop(),this},sort:function(e){var t=Array.prototype.slice.call(this);return Array.prototype.sort.call(t,e),this.splice.apply(this,[0,t.length].concat(t)),this}}),define.eventsProto)DefineList[prop]=define.eventsProto[prop],Object.defineProperty(DefineList.prototype,prop,{enumerable:!1,value:define.eventsProto[prop],writable:!0});Object.defineProperty(DefineList.prototype,"length",{get:function(){return this.__inSetup||ObservationRecorder.add(this,"length"),this._length},set:function(e){if(runningNative)this._length=e;else if(null!=e&&!isNaN(+e)&&e!==this._length)if(e>this._length-1){var t=new Array(e-this._length);this.push.apply(this,t)}else this.splice(e)},enumerable:!0}),DefineList.prototype.attr=function(e,t){return canLog.warn("DefineMap::attr shouldn't be called"),0===arguments.length?this.get():e&&"object"==typeof e?this.set.apply(this,arguments):1===arguments.length?this.get(e):this.set(e,t)},DefineList.prototype.item=function(e,t){return 1===arguments.length?this.get(e):this.set(e,t)},DefineList.prototype.items=function(){return canLog.warn("DefineList::get should should be used instead of DefineList::items"),this.get()};var defineListProto={"can.isMoreListLikeThanMapLike":!0,"can.isMapLike":!0,"can.isListLike":!0,"can.isValueLike":!1,"can.getKeyValue":DefineList.prototype.get,"can.setKeyValue":DefineList.prototype.set,"can.onKeyValue":function(e,t,n){var i;return isNaN(e)?onKeyValue.apply(this,arguments):(i=function(){t(this[e])},"production"!==process$1.env.NODE_ENV&&Object.defineProperty(i,"name",{value:"translationHandler("+e+")::"+canReflect.getName(this)+".onKeyValue('length',"+canReflect.getName(t)+")"}),singleReference.set(t,this,i,e),onKeyValue.call(this,"length",i,n))},"can.offKeyValue":function(e,t,n){var i;return isNaN(e)?offKeyValue.apply(this,arguments):(i=singleReference.getAndDelete(t,this,e),offKeyValue.call(this,"length",i,n))},"can.deleteKeyValue":function(e){if("number"==typeof(e=isNaN(+e)||e%1?e:+e))this.splice(e,1);else{if("length"===e||"_length"===e)return;this.set(e,void 0)}return this},"can.assignDeep":function(e){queues.batch.start(),canReflect.assignList(this,e),queues.batch.stop()},"can.updateDeep":function(e){queues.batch.start(),this.replace(e),queues.batch.stop()},"can.keyHasDependencies":function(e){return!!(this._computed&&this._computed[e]&&this._computed[e].compute)},"can.getKeyDependencies":function(e){var t;return this._computed&&this._computed[e]&&this._computed[e].compute&&((t={}).valueDependencies=new Set,t.valueDependencies.add(this._computed[e].compute)),t},"can.splice":function(e,t,n){this.splice.apply(this,[e,t].concat(n))},"can.onPatches":function(e,t){this[canSymbol.for("can.onKeyValue")](localOnPatchesSymbol,e,t)},"can.offPatches":function(e,t){this[canSymbol.for("can.offKeyValue")](localOnPatchesSymbol,e,t)}};"production"!==process$1.env.NODE_ENV&&(defineListProto["can.getName"]=function(){return canReflect.getName(this.constructor)+"[]"}),canReflect.assignSymbols(DefineList.prototype,defineListProto),canReflect.setKeyValue(DefineList.prototype,canSymbol.iterator,function(){var e=-1;return"number"!=typeof this.length&&(this.length=0),{next:function(){return{value:this[++e],done:e>=this.length}}.bind(this)}}),"production"!==process$1.env.NODE_ENV&&(DefineList.prototype.log=defineHelpers.log),define.DefineList=DefineList;var list=namespace.DefineList=DefineList;export{list as a,list as b};
//# sourceMappingURL=chunk-b9130a6e.js.map
