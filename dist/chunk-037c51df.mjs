import{a as getDocument}from"./chunk-14877182.mjs";import{a as isBrowserWindow}from"./chunk-e7f43bec.mjs";import"./chunk-2c9f11a8.mjs";import"./chunk-5f1245ff.mjs";import{a as KeyTree}from"./chunk-8d049599.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";import"./chunk-805ffcb4.mjs";import{a as namespace}from"./chunk-3b4c7b38.mjs";function getTargetDocument(e){return e.ownerDocument||getDocument()}function createEvent(e,t,n,r){var i,o=getTargetDocument(e).createEvent("HTMLEvents");if("string"==typeof t)i=t;else for(var a in i=t.type,t)void 0===o[a]&&(o[a]=t[a]);return void 0===n&&(n=!0),o.initEvent(i,n,r),o}function isDomEventTarget(e){if(!e||!e.nodeName)return e===window;var t=e.nodeType;return 1===t||9===t||11===t}function addDomContext(e,t){return isDomEventTarget(e)&&(t=Array.prototype.slice.call(t,0)).unshift(e),t}function removeDomContext(e,t){return isDomEventTarget(e)||(e=(t=Array.prototype.slice.call(t,0)).shift()),{context:e,args:t}}var fixSyntheticEventsOnDisabled=!1;function isDispatchingOnDisabled(e,t){var n=t.type,r="inserted"===n||"removed"===n,i=!!e.disabled;return r&&i}function forceEnabledForDispatch(e,t){return fixSyntheticEventsOnDisabled&&isDispatchingOnDisabled(e,t)}!function(){if(isBrowserWindow()){var e="fix_synthetic_events_on_disabled_test",t=document.createElement("input");t.disabled=!0;var n=setTimeout(function(){fixSyntheticEventsOnDisabled=!0},50),r=function r(){clearTimeout(n),t.removeEventListener(e,r)};t.addEventListener(e,r);try{var i=document.create("HTMLEvents");i.initEvent(e,!1),t.dispatchEvent(i)}catch(e){r(),fixSyntheticEventsOnDisabled=!0}}}();var util={createEvent:createEvent,addDomContext:addDomContext,removeDomContext:removeDomContext,isDomEventTarget:isDomEventTarget,getTargetDocument:getTargetDocument,forceEnabledForDispatch:forceEnabledForDispatch};function EventRegistry(){this._registry={}}var makeEventRegistry=function(){return new EventRegistry};EventRegistry.prototype.has=function(e){return!!this._registry[e]},EventRegistry.prototype.get=function(e){return this._registry[e]},EventRegistry.prototype.add=function(e,t){if(!e)throw new Error("An EventDefinition must be provided");if("function"!=typeof e.addEventListener)throw new TypeError("EventDefinition addEventListener must be a function");if("function"!=typeof e.removeEventListener)throw new TypeError("EventDefinition removeEventListener must be a function");if("string"!=typeof(t=t||e.defaultEventType))throw new TypeError("Event type must be a string, not "+t);if(this.has(t))throw new Error('Event "'+t+'" is already registered');this._registry[t]=e;var n=this;return function(){n._registry[t]=void 0}};var useCapture=function(e){return"focus"===e||"blur"===e};function makeDelegator(e){var t=function(e){this.element=e,this.events={},this.delegated={}};return canReflect.assignSymbols(t.prototype,{"can.setKeyValue":function(t,n){var r=this.delegated[t]=function(e){canReflect.each(n,function(t,n){var r=e.target;do{var i=r===document?document.documentElement:r;(i.matches||i.msMatchesSelector).call(i,n)&&t.forEach(function(t){t.call(i,e)}),r=r.parentNode}while(r&&r!==e.currentTarget)})};this.events[t]=n,e.addEventListener(this.element,t,r,useCapture(t))},"can.getKeyValue":function(e){return this.events[e]},"can.deleteKeyValue":function(t){e.removeEventListener(this.element,t,this.delegated[t],useCapture(t)),delete this.delegated[t],delete this.events[t]},"can.getOwnEnumerableKeys":function(){return Object.keys(this.events)}}),t}var MakeDelegateEventTree=function(e){var t=makeDelegator(e);return new KeyTree([Map,t,Object,Array])},domEvents={_eventRegistry:makeEventRegistry(),addEvent:function(e,t){return this._eventRegistry.add(e,t)},addEventListener:function(e,t){if(domEvents._eventRegistry.has(t))return domEvents._eventRegistry.get(t).addEventListener.apply(domEvents,arguments);var n=Array.prototype.slice.call(arguments,1);return e.addEventListener.apply(e,n)},removeEventListener:function(e,t){if(domEvents._eventRegistry.has(t))return domEvents._eventRegistry.get(t).removeEventListener.apply(domEvents,arguments);var n=Array.prototype.slice.call(arguments,1);return e.removeEventListener.apply(e,n)},addDelegateListener:function(e,t,n,r){domEvents._eventTree.add([e,t,n,r])},removeDelegateListener:function(e,t,n,r){domEvents._eventTree.delete([e,t,n,r])},dispatch:function(e,t,n,r){var i=util.createEvent(e,t,n,r),o=util.forceEnabledForDispatch(e,i);o&&(e.disabled=!1);var a=e.dispatchEvent(i);return o&&(e.disabled=!0),a}};domEvents._eventTree=MakeDelegateEventTree(domEvents);var canDomEvents=namespace.domEvents=domEvents;export{canDomEvents as a,util as b,canDomEvents as c};
//# sourceMappingURL=chunk-037c51df.js.map
