import{a as canList,b as CanMap}from"./chunk-f25bc34b.mjs";import{a as process$1}from"./chunk-bacf0c54.mjs";import{a as dev}from"./chunk-585d4076.mjs";import"./chunk-bd824939.mjs";import"./chunk-f8a6947c.mjs";import"./chunk-862b179d.mjs";import{c as mapHelpers}from"./chunk-ad124247.mjs";import"./chunk-ce868a5a.mjs";import"./chunk-5f1245ff.mjs";import"./chunk-fa6b878a.mjs";import{a as assign}from"./chunk-75bea8d8.mjs";import{a as mapEventBindings}from"./chunk-910f3205.mjs";import{a as queues}from"./chunk-12ed728f.mjs";import{a as compute}from"./chunk-72b5b2d5.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";import{a as ObservationRecorder}from"./chunk-8811d387.mjs";import"./chunk-805ffcb4.mjs";import"./chunk-e85142ea.mjs";import"./chunk-eae5b219.mjs";import"./chunk-3b4c7b38.mjs";import"./chunk-b37d91a1.mjs";import"./chunk-cb265e10.mjs";import"./chunk-2c9f11a8.mjs";import"./chunk-037c51df.mjs";import"./chunk-14877182.mjs";import"./chunk-cc1f8896.mjs";import"./chunk-e7f43bec.mjs";import"./chunk-8d049599.mjs";import"./chunk-a9b254be.mjs";import"./chunk-cb75b84f.mjs";import"./chunk-b2e1c1d8.mjs";import"./chunk-a97d251a.mjs";import"./chunk-04598776.mjs";import"./chunk-0877ccb7.mjs";import"./chunk-2b1fdbc0.mjs";import"./chunk-072ec069.mjs";import"./chunk-7dfeb1df.mjs";import"./chunk-79943599.mjs";import"./chunk-b1806013.mjs";import"./chunk-d2889630.mjs";import"./chunk-825526fa.mjs";import"./chunk-b09dcf0e.mjs";import"./chunk-c1d5d21e.mjs";var define={},hasDefaultForSerialize=function(e){return"object"==typeof e&&"serialize"in e},getDefaultForSerialize=function(e){var t=!0;return hasDefaultForSerialize(e)&&(t=!!e.serialize),t},keysForDefinition=function(e){var t=[],i=e&&e["*"];for(var r in e){var n=e[r],o=getDefaultForSerialize(i);"object"==typeof n&&"serialize"in n?o=!!n.serialize:"object"!=typeof n||hasDefaultForSerialize(i)||(o=!n.get),o&&t.push(r)}return t},getPropDefineBehavior=function(e,t,i){var r,n;if(i){if(r=i[t],n=i["*"],r&&void 0!==r[e])return r[e];if(n&&void 0!==n[e])return n[e]}};mapHelpers.define=function(e,t){var i=e.prototype.define;if(t){var r={};mapHelpers.twoLevelDeepExtend(r,t),mapHelpers.twoLevelDeepExtend(r,i),assign(i,r)}for(var n in"production"!==process$1.env.NODE_ENV&&e.define&&dev.warn("The define property should be on the map's prototype properties, not the static properties."),e.defaultGenerators={},i){var o=i[n].type;"string"==typeof o&&"object"==typeof define.types[o]&&(delete i[n].type,assign(i[n],define.types[o])),"value"in i[n]&&("function"==typeof i[n].value?e.defaultGenerators[n]=i[n].value:e.defaults[n]=i[n].value),"function"==typeof i[n].Value&&function(t){e.defaultGenerators[n]=function(){return new t}}(i[n].Value)}};var oldSetupDefaults=CanMap.prototype._setupDefaults;CanMap.prototype._setupDefaults=function(e){var t=assign({},oldSetupDefaults.call(this)),i={},r=this.constructor,n=this._get;for(var o in this._get=function(e){var r=-1!==e.indexOf(".")?e.substr(0,e.indexOf(".")):e;return r in t&&!(r in i)&&(this.attr(r,t[r]),i[r]=!0),n.apply(this,arguments)},r.defaultGenerators)e&&o in e||(t[o]=r.defaultGenerators[o].call(this));return delete this._get,t};var proto=CanMap.prototype,oldSet=proto.__set;proto.__set=function(e,t,i,r,n){var o,a=this,s=function(t){return"production"!==process$1.env.NODE_ENV&&clearTimeout(o),!1!==(n&&n.call(a,t))&&mapEventBindings.dispatch.call(a,"error",[e,t],!0),!1},u=getPropDefineBehavior("set",e,this.define),p=getPropDefineBehavior("get",e,this.define);if(u){queues.batch.start();var c=!1,f=u.call(this,t,function(t){p?a[e](t):oldSet.call(a,e,t,i,r,s),c=!0,"production"!==process$1.env.NODE_ENV&&clearTimeout(o)},s,p?this._computedAttrs[e].compute.computeInstance.lastSetValue.get():i);return p?(void 0!==f&&!c&&u.length>=1&&this._computedAttrs[e].compute(f),void queues.batch.stop()):void 0===f&&!c&&u.length>1?("production"!==process$1.env.NODE_ENV&&(o=setTimeout(function(){dev.warn('can/map/define: Setter "'+e+'" did not return a value or call the setter callback.')},dev.warnTimeout)),void queues.batch.stop()):(c||oldSet.call(a,e,0===u.length&&void 0===f?t:f,i,r,s),queues.batch.stop(),this)}return oldSet.call(a,e,t,i,r,s),this},define.types={date:function(e){var t=typeof e;return"string"===t?(e=Date.parse(e),isNaN(e)?null:new Date(e)):"number"===t?new Date(e):e},number:function(e){return null==e?e:+e},boolean:function(e){return null==e?e:!("false"===e||"0"===e||!e)},htmlbool:function(e){return"string"==typeof e||!!e},"*":function(e){return e},string:function(e){return null==e?e:""+e},compute:{set:function(e,t,i,r){return e&&e.isComputed?e:r&&r.isComputed?(r(e),r):e},get:function(e){return e&&e.isComputed?e():e}}};var oldType=proto.__type;proto.__type=function(e,t){var i=getPropDefineBehavior("type",t,this.define),r=getPropDefineBehavior("Type",t,this.define),n=e;return"string"==typeof i&&(i=define.types[i]),i||r?(i&&(n=i.call(this,n,t)),!r||null==n||n instanceof r||(n=new r(n)),n):(canReflect.isPlainObject(n)&&n.define&&(n=new(n=CanMap.extend(n))),oldType.call(this,n,t))};var oldRemove=proto.__remove;proto.__remove=function(e,t){var i,r=getPropDefineBehavior("remove",e,this.define);return r?(queues.batch.start(),!1===(i=r.call(this,t))?void queues.batch.stop():(i=oldRemove.call(this,e,t),queues.batch.stop(),i)):oldRemove.call(this,e,t)};var oldSetupComputes=proto._setupComputedProperties;proto._setupComputedProperties=function(){for(var e in oldSetupComputes.apply(this,arguments),this.define){var t=this.define[e].get;t&&mapHelpers.addComputedAttr(this,e,compute.async(void 0,t,this))}};var oldSingleSerialize=proto.___serialize,serializeProp=function(e,t,i){var r="*"!==t&&getPropDefineBehavior("serialize",t,e.define);return void 0===r?oldSingleSerialize.call(e,t,i):!1!==r?"function"==typeof r?r.call(e,i,t):oldSingleSerialize.call(e,t,i):void 0};proto.___serialize=function(e,t){return serializeProp(this,e,t)};var oldSerialize=proto.serialize;proto.serialize=function(e){var t,i=oldSerialize.apply(this,arguments);if(e)return i;for(var r in this.define)r in i||this.define&&(this.define[r]&&this.define[r].serialize||this.define["*"]&&this.define["*"].serialize)&&void 0!==(t=serializeProp(this,r,this.attr(r)))&&(i[r]=t);return i},canReflect.assignSymbols(proto,{"can.hasKey":function(e){var t=this.define&&e in this.define,i=this._data&&e in this._data;return t||i||e in this},"can.getOwnEnumerableKeys":function(){this.__inSetup||ObservationRecorder.add(this,"__keys");var e,t,i=keysForDefinition(this.define),r=Object.keys(this._data),n=getDefaultForSerialize(this.define&&this.define["*"]),o=this.constructor.enumerable;for(r=r.filter(function(e){return o?n&&!1!==o[e]:n}),e=0;e<r.length;e++)t=r[e],!(i.indexOf(t)<0)||this.define&&this.define[t]||i.push(r[e]);return i}});var canMapDefine=define;export default canMapDefine;
//# sourceMappingURL=can-map-define.js.map
