import{a as process$1}from"./chunk-bacf0c54.mjs";import"./chunk-5f1245ff.mjs";import"./chunk-fa6b878a.mjs";import{b as log}from"./chunk-660b4975.mjs";import"./chunk-7dfeb1df.mjs";import"./chunk-862b179d.mjs";import"./chunk-79943599.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";import{a as ObservationRecorder}from"./chunk-8811d387.mjs";import{a as SimpleObservable}from"./chunk-65b62c71.mjs";import{a as Observation}from"./chunk-c1d5d21e.mjs";import{a as queues}from"./chunk-12ed728f.mjs";import{a as valueEventBindings}from"./chunk-825526fa.mjs";var peek=ObservationRecorder.ignore(canReflect.getValue.bind(canReflect));function SettableObservable(e,t,n){function a(){return e.call(t,this.lastSetValue.get())}this.lastSetValue=new SimpleObservable(n),this.handler=this.handler.bind(this),"production"!==process$1.env.NODE_ENV&&(canReflect.assignSymbols(this,{"can.getName":function(){return canReflect.getName(this.constructor)+"<"+canReflect.getName(e)+">"}}),Object.defineProperty(this.handler,"name",{value:canReflect.getName(this)+".handler"}),Object.defineProperty(a,"name",{value:canReflect.getName(e)+"::"+canReflect.getName(this.constructor)})),this.observation=new Observation(a,this)}valueEventBindings(SettableObservable.prototype),canReflect.assignMap(SettableObservable.prototype,{log:log,constructor:SettableObservable,handler:function(e){var t,n=this._value;this._value=e,"production"!==process$1.env.NODE_ENV&&("function"==typeof this._log&&this._log(n,e),t=[canReflect.getName(this),"set to",e,"from",n]),queues.enqueueByQueue(this.handlers.getNode([]),this,[e,n],null,t)},onBound:function(){this.bound||(this.bound=!0,this.activate())},activate:function(){canReflect.onValue(this.observation,this.handler,"notify"),this._value=peek(this.observation)},onUnbound:function(){this.bound=!1,canReflect.offValue(this.observation,this.handler,"notify")},set:function(e){var t=this.lastSetValue.get();canReflect.isObservableLike(t)&&canReflect.isValueLike(t)&&!canReflect.isObservableLike(e)?canReflect.setValue(t,e):e!==t&&this.lastSetValue.set(e)},get:function(){return ObservationRecorder.isRecording()&&(ObservationRecorder.add(this),this.bound||this.onBound()),!0===this.bound?this._value:this.observation.get()},hasDependencies:function(){return canReflect.valueHasDependencies(this.observation)},getValueDependencies:function(){return canReflect.getValueDependencies(this.observation)}}),Object.defineProperty(SettableObservable.prototype,"value",{set:function(e){return this.set(e)},get:function(){return this.get()}}),canReflect.assignSymbols(SettableObservable.prototype,{"can.getValue":SettableObservable.prototype.get,"can.setValue":SettableObservable.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return canReflect.getPriority(this.observation)},"can.setPriority":function(e){canReflect.setPriority(this.observation,e)},"can.valueHasDependencies":SettableObservable.prototype.hasDependencies,"can.getValueDependencies":SettableObservable.prototype.getValueDependencies});var settable=SettableObservable;export{settable as a};
//# sourceMappingURL=chunk-576d20b1.js.map
