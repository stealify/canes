{"version":3,"file":"chunk-3bb7ab49.js","sources":["../node_modules/can-globals/base-url/base-url.js","../node_modules/can-join-uris/can-join-uris.js","../node_modules/can-stache/helpers/-debugger.js","../node_modules/can-stache/src/truthy-observable.js","../node_modules/can-dom-data/can-dom-data.js","../node_modules/can-stache/helpers/-for-of.js","../node_modules/can-stache/helpers/-let.js","../node_modules/can-stache/helpers/core.js"],"sourcesContent":["'use strict';\n\n\nvar globals = require('../can-globals-instance');\nrequire('../global/global');\nrequire('../document/document');\n\n/**\n * @module {function} can-globals/base-url/base-url base-url\n * @parent can-globals/modules\n *\n * @signature `baseUrl(optionalBaseUrlToSet)`\n *\n * Get and/or set the \"base\" (containing path) of the document.\n *\n * ```js\n * var baseUrl = require(\"can-globals/base-url/base-url\");\n *\n * console.log(baseUrl());           // -> \"http://localhost:8080\"\n * console.log(baseUrl(baseUrl() + \"/foo/bar\")); // -> \"http://localhost:8080/foo/bar\"\n * console.log(baseUrl());           // -> \"http://localhost:8080/foo/bar\"\n * ```\n *\n * @param {String} setUrl An optional base url to override reading the base URL from the known path.\n *\n * @return {String} Returns the set or computed base URL\n */\n\nglobals.define('base-url', function(){\n\tvar global = globals.getKeyValue('global');\n\tvar domDocument = globals.getKeyValue('document');\n\tif (domDocument && 'baseURI' in domDocument) {\n\t\treturn domDocument.baseURI;\n\t} else if(global.location) {\n\t\tvar href = global.location.href;\n\t\tvar lastSlash = href.lastIndexOf(\"/\");\n\t\treturn lastSlash !== -1 ? href.substr(0, lastSlash) : href;\n\t} else if(typeof process !== \"undefined\") {\n\t\treturn process.cwd();\n\t}\n});\n\nmodule.exports = globals.makeExport('base-url');\n","'use strict';\n\nvar namespace = require(\"can-namespace\");\nvar parseURI = require('can-parse-uri');\n\nmodule.exports = namespace.joinURIs = function(base, href) {\n\tfunction removeDotSegments(input) {\n\t\tvar output = [];\n\t\tinput.replace(/^(\\.\\.?(\\/|$))+/, '')\n\t\t\t.replace(/\\/(\\.(\\/|$))+/g, '/')\n\t\t\t.replace(/\\/\\.\\.$/, '/../')\n\t\t\t.replace(/\\/?[^\\/]*/g, function (p) {\n\t\t\t\tif (p === '/..') {\n\t\t\t\t\toutput.pop();\n\t\t\t\t} else {\n\t\t\t\t\toutput.push(p);\n\t\t\t\t}\n\t\t\t});\n\t\treturn output.join('').replace(/^\\//, input.charAt(0) === '/' ? '/' : '');\n\t}\n\n\thref = parseURI(href || '');\n\tbase = parseURI(base || '');\n\n\treturn !href || !base ? null : (href.protocol || base.protocol) +\n\t\t(href.protocol || href.authority ? href.authority : base.authority) +\n\t\tremoveDotSegments(href.protocol || href.authority || href.pathname.charAt(0) === '/' ? href.pathname : (href.pathname ? ((base.authority && !base.pathname ? '/' : '') + base.pathname.slice(0, base.pathname.lastIndexOf('/') + 1) + href.pathname) : base.pathname)) +\n\t\t\t(href.protocol || href.authority || href.pathname ? href.search : (href.search || base.search)) +\n\t\t\thref.hash;\n};\n","\"use strict\";\nvar canLog = require('can-log');\nfunction noop () {}\nvar resolveValue = noop;\nvar evaluateArgs = noop;\nvar __testing = {};\n\n//!steal-remove-start\nif (process.env.NODE_ENV !== 'production') {\n\tvar canReflect = require('can-reflect');\n\n\tvar canSymbol = require('can-symbol');\n\n\t__testing = {\n\t\tallowDebugger: true\n\t};\n\n\tresolveValue = function (value) {\n\t\tif (value && value[canSymbol.for(\"can.getValue\")]) {\n\t\t\treturn canReflect.getValue(value);\n\t\t}\n\t\treturn value;\n\t};\n\n\tevaluateArgs = function (left, right) {\n\t\tswitch (arguments.length) {\n\t\t\tcase 0: return true;\n\t\t\tcase 1: return !!resolveValue(left);\n\t\t\tcase 2: return resolveValue(left) === resolveValue(right);\n\t\t\tdefault:\n\t\t\t\tcanLog.log([\n\t\t\t\t\t'Usage:',\n\t\t\t\t\t'  {{debugger}}: break any time this helper is evaluated',\n\t\t\t\t\t'  {{debugger condition}}: break when `condition` is truthy',\n\t\t\t\t\t'  {{debugger left right}}: break when `left` === `right`'\n\t\t\t\t].join('\\n'));\n\t\t\t\tthrow new Error('{{debugger}} must have less than three arguments');\n\t\t}\n\t};\n}\n//!steal-remove-end\n\nfunction debuggerHelper (left, right) {\n\t//!steal-remove-start\n\tif (process.env.NODE_ENV !== 'production') {\n\t\tvar shouldBreak = evaluateArgs.apply(null, Array.prototype.slice.call(arguments, 0, -1));\n\t\tif (!shouldBreak) {\n\t\t\treturn;\n\t\t}\n\n\t\t// jshint +W098\n\t\tvar options = arguments[arguments.length - 1];\n\t\tvar get = function (path) {\n\t\t\treturn options.scope.get(path);\n\t\t};\n\t\t// jshint -W098\n\n\t\tcanLog.log('Use `get(<path>)` to debug this template');\n\n\t\tvar allowDebugger = __testing.allowDebugger;\n\t\t// forgotten debugger\n\t\t// jshint -W087\n\t\tif (allowDebugger) {\n\t\t\tdebugger;\n\t\t\treturn;\n\t\t}\n\t\t// jshint +W087\n\t}\n\t//!steal-remove-end\n\n\tcanLog.warn('Forgotten {{debugger}} helper');\n}\ndebuggerHelper.requiresOptionsArgument = true;\n\nmodule.exports = {\n\thelper: debuggerHelper,\n\tevaluateArgs: evaluateArgs,\n\tresolveValue: resolveValue,\n\n\t// used only for testing purposes\n\t__testing: __testing\n};\n","\"use strict\";\nvar Observation = require(\"can-observation\");\nvar canReflect = require(\"can-reflect\");\n\nmodule.exports = function(observable){\n    return new Observation(function truthyObservation(){\n        var val = canReflect.getValue(observable);\n\n        return !!val;\n    });\n};\n","'use strict';\nvar namespace = require('can-namespace');\n\nvar isEmptyObject = function(obj){\n\t/* jshint -W098 */\n\tfor(var prop in obj) {\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nvar data = new WeakMap();\n\n// delete this node's `data`\n// returns true if the node was deleted.\nvar deleteNode = function(node) {\n\tvar nodeDeleted = false;\n\tif (data.has(node)) {\n\t\tnodeDeleted = true;\n\t\tdata.delete(node);\n\t}\n\treturn nodeDeleted;\n};\n\nvar setData = function(node, name, value) {\n\tvar store = data.get(node);\n\tif (store === undefined) {\n\t\tstore = {};\n\t\tdata.set(node, store);\n\t}\n\tif (name !== undefined) {\n\t\tstore[name] = value;\n\t}\n\treturn store;\n};\n\n/*\n * Core of domData that does not depend on mutationDocument\n * This is separated in order to prevent circular dependencies\n */\nvar domData = {\n\t_data: data,\n\n\tget: function(node, key) {\n\t\tvar store = data.get(node);\n\t\treturn key === undefined ? store : store && store[key];\n\t},\n\n\tset: setData,\n\n\tclean: function(node, prop) {\n\t\tvar itemData = data.get(node);\n\t\tif (itemData && itemData[prop]) {\n\t\t\tdelete itemData[prop];\n\t\t}\n\t\tif (isEmptyObject(itemData)) {\n\t\t\tdeleteNode(node);\n\t\t}\n\t},\n\n\tdelete: deleteNode\n};\n\nif (namespace.domData) {\n\tthrow new Error(\"You can't have two versions of can-dom-data, check your dependencies\");\n} else {\n\tmodule.exports = namespace.domData = domData;\n}\n","var helpers = require(\"can-stache-helpers\");\nvar canReflect = require(\"can-reflect\");\nvar Observation = require(\"can-observation\");\nvar live = require('can-view-live');\nvar nodeLists = require('can-view-nodelist');\nvar expression = require(\"../src/expression\");\nvar KeyObservable = require(\"../src/key-observable\");\n\nvar bindAndRead = function (value) {\n\tif ( value && canReflect.isValueLike(value) ) {\n\t\tObservation.temporarilyBind(value);\n\t\treturn canReflect.getValue(value);\n\t} else {\n\t\treturn value;\n\t}\n};\n\nfunction forOfObject(object, variableName, options){\n\tvar result = [];\n\tcanReflect.each(object, function(val, key){\n\t\tvar value = new KeyObservable(object, key);\n\t\tvar variableScope = {};\n\t\tif(variableName !== undefined){\n\t\t\tvariableScope[variableName] = value;\n\t\t}\n\t\tresult.push(\n\t\t\toptions.fn( options.scope\n\t\t\t\t.add({ key: key }, { special: true })\n\t\t\t\t.addLetContext(variableScope) )\n\t\t);\n\t});\n\n\treturn options.stringOnly ? result.join('') : result;\n}\n\n// this is called with the ast ... we are going to use that to our advantage.\nvar forHelper = function(helperOptions) {\n\t// lookup\n\n\t// TODO: remove in prod\n\t// make sure we got called with the right stuff\n\tif(helperOptions.exprData.argExprs.length !== 1) {\n\t\tthrow new Error(\"for(of) broken syntax\");\n\t}\n\n\t// TODO: check if an instance of helper;\n\n\tvar helperExpr = helperOptions.exprData.argExprs[0].expr;\n\tvar variableName, valueLookup, valueObservable;\n\tif(helperExpr instanceof expression.Lookup) {\n\n\t\tvalueObservable = helperExpr.value(helperOptions.scope);\n\n\t} else if(helperExpr instanceof expression.Helper) {\n\t\t// TODO: remove in prod\n\t\tvar inLookup = helperExpr.argExprs[0];\n\t\tif(inLookup.key !== \"of\") {\n\t\t\tthrow new Error(\"for(of) broken syntax\");\n\t\t}\n\t\tvariableName = helperExpr.methodExpr.key;\n\t\tvalueLookup = helperExpr.argExprs[1];\n\t\tvalueObservable = valueLookup.value(helperOptions.scope);\n\t}\n\n\tvar items =  valueObservable;\n\n\tvar args = [].slice.call(arguments),\n\t\toptions = args.pop(),\n\t\tresolved = bindAndRead(items);\n\n\tif(resolved && !canReflect.isListLike(resolved)) {\n\t\treturn forOfObject(resolved,variableName, helperOptions);\n\t}\n\tif(options.stringOnly) {\n\t\tvar parts = [];\n\t\tcanReflect.eachIndex(resolved, function(value, index){\n\t\t\tvar variableScope = {};\n\t\t\tif(variableName !== undefined){\n\t\t\t\tvariableScope[variableName] = value;\n\t\t\t}\n\t\t\tparts.push(\n\t\t\t\thelperOptions.fn( options.scope\n\t\t\t\t\t.add({ index: index }, { special: true })\n\t\t\t\t\t.addLetContext(variableScope) )\n\t\t\t);\n\t\t});\n\t\treturn parts.join(\"\");\n\t} else {\n\t\t// Tells that a helper has been called, this function should be returned through\n\t\t// checking its value.\n\t\toptions.metadata.rendered = true;\n\t\treturn function(el){\n\t\t\t// make a child nodeList inside the can.view.live.html nodeList\n\t\t\t// so that if the html is re\n\t\t\tvar nodeList = [el];\n\t\t\tnodeList.expression = \"live.list\";\n\t\t\tnodeLists.register(nodeList, null, options.nodeList, true);\n\t\t\t// runs nest replacements\n\t\t\tnodeLists.update(options.nodeList, [el]);\n\n\n\t\t\tvar cb = function (item, index, parentNodeList) {\n\t\t\t\tvar variableScope = {};\n\t\t\t\tif(variableName !== undefined){\n\t\t\t\t\tvariableScope[variableName] = item;\n\t\t\t\t}\n\t\t\t\treturn options.fn(\n\t\t\t\t\toptions.scope\n\t\t\t\t\t.add({ index: index }, { special: true })\n\t\t\t\t\t.addLetContext(variableScope),\n\t\t\t\toptions.options,\n\t\t\t\tparentNodeList\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tlive.list(el, items, cb, options.context, el.parentNode, nodeList, function(list, parentNodeList){\n\t\t\t\treturn options.inverse(options.scope.add(list), options.options, parentNodeList);\n\t\t\t});\n\t\t};\n\t}\n};\nforHelper.isLiveBound = true;\nforHelper.requiresOptionsArgument = true;\nforHelper.ignoreArgLookup = function ignoreArgLookup(index) {\n\treturn index === 0;\n};\n\n\nhelpers.for = forHelper;\n","var helpers = require(\"can-stache-helpers\");\nvar canReflect = require(\"can-reflect\");\n\nfunction isVariable(scope) {\n\treturn scope._meta.variable === true;\n}\n\nhelpers[\"let\"] = function(options){\n\tvar variableScope = options.scope.getScope(isVariable);\n\tif(!variableScope) {\n\t\tthrow new Error(\"There is no variable scope!\");\n\t}\n\tcanReflect.assignMap(variableScope._context, options.hash);\n\treturn document.createTextNode(\"\");\n};\n","\"use strict\";\nvar live = require('can-view-live');\nvar nodeLists = require('can-view-nodelist');\nvar utils = require('../src/utils');\nvar getBaseURL = require('can-globals/base-url/base-url');\nvar joinURIs = require('can-join-uris');\nvar assign = require('can-assign');\nvar dev = require('can-log/dev/dev');\nvar canReflect = require(\"can-reflect\");\nvar debuggerHelper = require('./-debugger').helper;\nvar KeyObservable = require(\"../src/key-observable\");\nvar Observation = require(\"can-observation\");\nvar TruthyObservable = require(\"../src/truthy-observable\");\nvar helpers = require(\"can-stache-helpers\");\n\nvar domData = require('can-dom-data');\nvar domDataState = require('can-dom-data-state');\n\nrequire(\"./-for-of\");\nrequire(\"./-let\");\n\n\nvar builtInHelpers = {};\n\n// ## Helpers\nvar helpersCore = {\n\tlooksLikeOptions: function(options){\n\t\treturn options && typeof options.fn === \"function\" && typeof options.inverse === \"function\";\n\t},\n\tresolve: function(value) {\n\t\tif (value && canReflect.isValueLike(value)) {\n\t\t\treturn canReflect.getValue(value);\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t},\n\tresolveHash: function(hash){\n\t\tvar params = {};\n\t\tfor(var prop in hash) {\n\t\t\tparams[prop] = helpersCore.resolve(hash[prop]);\n\t\t}\n\t\treturn params;\n\t},\n\tbindAndRead: function (value) {\n\t\tif ( value && canReflect.isValueLike(value) ) {\n\t\t\tObservation.temporarilyBind(value);\n\t\t\treturn canReflect.getValue(value);\n\t\t} else {\n\t\t\treturn value;\n\t\t}\n\t},\n\tregisterHelper: function(name, callback){\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tif (helpers[name]) {\n\t\t\t\tdev.warn('The helper ' + name + ' has already been registered.');\n\t\t\t}\n\t\t}\n\t\t//!steal-remove-end\n\n\t\t// mark passed in helper so it will be automatically passed\n\t\t// helperOptions (.fn, .inverse, etc) when called as Call Expressions\n\t\tcallback.requiresOptionsArgument = true;\n\n\t\t// store on global helpers list\n\t\thelpers[name] = callback;\n\t},\n\tregisterHelpers: function(helpers) {\n\t\tvar name, callback;\n\t\tfor(name in helpers) {\n\t\t\tcallback = helpers[name];\n\t\t\thelpersCore.registerHelper(name, helpersCore.makeSimpleHelper(callback));\n\t\t}\n\t},\n\tmakeSimpleHelper: function(fn) {\n\t\treturn function() {\n\t\t\tvar realArgs = [];\n\t\t\tcanReflect.eachIndex(arguments, function(val) {\n\t\t\t\twhile (val && val.isComputed) {\n\t\t\t\t\tval = val();\n\t\t\t\t}\n\t\t\t\trealArgs.push(val);\n\t\t\t});\n\t\t\treturn fn.apply(this, realArgs);\n\t\t};\n\t},\n\taddHelper: function(name, callback) {\n\t\tif(typeof name === \"object\") {\n\t\t\treturn helpersCore.registerHelpers(name);\n\t\t}\n\t\treturn helpersCore.registerHelper(name, helpersCore.makeSimpleHelper(callback));\n\t},\n\n\t// add helpers that set up their own internal live-binding\n\t// these helpers will not be wrapped in computes and will\n\t// receive observable arguments when called with Call Expressions\n\taddLiveHelper: function(name, callback) {\n\t\tcallback.isLiveBound = true;\n\t\treturn helpersCore.registerHelper(name, callback);\n\t},\n\n\tgetHelper: function(name, scope) {\n\t\tvar helper = scope && scope.getHelper(name);\n\n\t\tif (!helper) {\n\t\t\thelper = helpers[name];\n\t\t}\n\n\t\treturn helper;\n\t},\n\t__resetHelpers: function() {\n\t\t// remove all helpers from can-stache-helpers object\n\t\tfor (var helper in helpers) {\n\t\t\tdelete helpers[helper];\n\t\t}\n\n\t\thelpersCore.addBuiltInHelpers();\n\t},\n\taddBuiltInHelpers: function() {\n\t\tcanReflect.each(builtInHelpers, function(helper, helperName) {\n\t\t\thelpers[helperName] = helper;\n\t\t});\n\t},\n\t_makeLogicHelper: function(name, logic){\n\t\tvar logicHelper =  assign(function() {\n\t\t\tvar args = Array.prototype.slice.call(arguments, 0),\n\t\t\t\toptions;\n\n\t\t\tif( helpersCore.looksLikeOptions(args[args.length - 1]) ){\n\t\t\t\toptions = args.pop();\n\t\t\t}\n\n\t\t\tfunction callLogic(){\n\t\t\t\t// if there are options, we want to prevent re-rendering if values are still truthy\n\t\t\t\tif(options) {\n\t\t\t\t\treturn logic(args) ? true: false;\n\t\t\t\t} else {\n\t\t\t\t\treturn logic(args);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//!steal-remove-start\n\t\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\t\tObject.defineProperty(callLogic, \"name\", {\n\t\t\t\t\tvalue: name+\"(\"+args.map(function(arg){\n\t\t\t\t\t\treturn canReflect.getName(arg);\n\t\t\t\t\t}).join(\",\")+\")\",\n\t\t\t\t\tconfigurable: true\n\t\t\t\t});\n\t\t\t}\n\t\t\t//!steal-remove-end\n\t\t\tvar callFn = new Observation(callLogic);\n\n\t\t\tif(options) {\n\t\t\t\treturn callFn.get() ? options.fn() : options.inverse();\n\t\t\t} else {\n\t\t\t\treturn callFn.get();\n\t\t\t}\n\n\t\t},{requiresOptionsArgument: true, isLiveBound: true});\n\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tObject.defineProperty(logicHelper, \"name\", {\n\t\t\t\tvalue: name,\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t}\n\t\t//!steal-remove-end\n\n\t\treturn logicHelper;\n\t}\n};\n\n\n\n// ## IF HELPER\nvar ifHelper = assign(function ifHelper(expr, options) {\n\tvar value;\n\t// if it's a function, wrap its value in a compute\n\t// that will only change values from true to false\n\tif (expr && canReflect.isValueLike(expr)) {\n\t\tvalue = canReflect.getValue(new TruthyObservable(expr));\n\t} else {\n\t\tvalue = !! helpersCore.resolve(expr);\n\t}\n\n\tif (value) {\n\t\treturn options.fn(options.scope || this);\n\t} else {\n\t\treturn options.inverse(options.scope || this);\n\t}\n}, {requiresOptionsArgument: true, isLiveBound: true});\n\n\n\n\n//## EQ/IS HELPER\nvar isHelper = helpersCore._makeLogicHelper(\"eq\", function eqHelper(args){\n\tvar curValue, lastValue;\n\tfor (var i = 0; i < args.length; i++) {\n\t\tcurValue = helpersCore.resolve(args[i]);\n\t\tcurValue = typeof curValue === \"function\" ? curValue() : curValue;\n\n\t\tif (i > 0) {\n\t\t\tif (curValue !== lastValue) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tlastValue = curValue;\n\t}\n\treturn true;\n});\n\nvar andHelper = helpersCore._makeLogicHelper(\"and\", function andHelper(args){\n\tif(args.length === 0 ) {\n\t\treturn false;\n\t}\n\tvar last;\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tlast = helpersCore.resolve(args[i]);\n\t\tif( !last  ) {\n\t\t\treturn last;\n\t\t}\n\t}\n\treturn last;\n});\n\nvar orHelper = helpersCore._makeLogicHelper(\"or\", function orHelper(args){\n\tif(args.length === 0 ) {\n\t\treturn false;\n\t}\n\tvar last;\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tlast = helpersCore.resolve(args[i]);\n\t\tif( last  ) {\n\t\t\treturn last;\n\t\t}\n\t}\n\treturn last;\n});\n\n\nvar switchHelper = function(expression, options){\n\thelpersCore.resolve(expression);\n\tvar found = false;\n\n\tvar caseHelper = function(value, options) {\n\t\tif(!found && helpersCore.resolve(expression) === helpersCore.resolve(value)) {\n\t\t\tfound = true;\n\t\t\treturn options.fn(options.scope.peek('this') || this);\n\t\t}\n\t};\n\tcaseHelper.requiresOptionsArgument = true;\n\n\t// create default helper as a value-like function\n\t// so that either {{#default}} or {{#default()}} will work\n\tvar defaultHelper = function(options) {\n\t\tif (!found) {\n\t\t\treturn options ? options.scope.peek('this') : true;\n\t\t}\n\t};\n\tdefaultHelper.requiresOptionsArgument = true;\n\tcanReflect.assignSymbols(defaultHelper, {\n\t\t\"can.isValueLike\": true,\n\t\t\"can.isFunctionLike\": false,\n\t\t\"can.getValue\": function() {\n\t\t\t// pass the helperOptions passed to {{#switch}}\n\t\t\treturn this(options);\n\t\t}\n\t});\n\n\tvar newScope = options.scope.add({\n\t\tcase: caseHelper,\n\t\tdefault: defaultHelper\n\t}, { notContext: true });\n\n\treturn options.fn(newScope, options);\n};\nswitchHelper.requiresOptionsArgument = true;\n\n\n// ## ODD HELPERS\n\nvar domDataHelper = function(attr, value) {\n\tvar data = (helpersCore.looksLikeOptions(value) ? value.context : value) || this;\n\treturn function setDomData(el) {\n\t\tdomData.set( el, attr, data );\n\t};\n};\n\nvar joinBaseHelper = function(firstExpr/* , expr... */){\n\tvar args = [].slice.call(arguments);\n\tvar options = args.pop();\n\n\tvar moduleReference = args.map( function(expr){\n\t\tvar value = helpersCore.resolve(expr);\n\t\treturn typeof value === \"function\" ? value() : value;\n\t}).join(\"\");\n\n\tvar templateModule = canReflect.getKeyValue(options.scope.templateContext.helpers, 'module');\n\tvar parentAddress = templateModule ? templateModule.uri: undefined;\n\n\tvar isRelative = moduleReference[0] === \".\";\n\n\tif(isRelative && parentAddress) {\n\t\treturn joinURIs(parentAddress, moduleReference);\n\t} else {\n\t\tvar baseURL = (typeof System !== \"undefined\" &&\n\t\t\t(System.renderingBaseURL || System.baseURL)) ||\tgetBaseURL();\n\n\t\t// Make sure one of them has a needed /\n\t\tif(moduleReference[0] !== \"/\" && baseURL[baseURL.length - 1] !== \"/\") {\n\t\t\tbaseURL += \"/\";\n\t\t}\n\n\t\treturn joinURIs(baseURL, moduleReference);\n\t}\n};\njoinBaseHelper.requiresOptionsArgument = true;\n\n// ## LEGACY HELPERS\n\n// ### each\nvar eachHelper = function(items) {\n\tvar args = [].slice.call(arguments),\n\t\toptions = args.pop(),\n\t\thashExprs = options.exprData.hashExprs,\n\t\tresolved = helpersCore.bindAndRead(items),\n\t\thashOptions,\n\t\taliases;\n\n\t// Check if using hash\n\tif (canReflect.size(hashExprs) > 0) {\n\t\thashOptions = {};\n\t\tcanReflect.eachKey(hashExprs, function (exprs, key) {\n\t\t\thashOptions[exprs.key] = key;\n\t\t});\n\t}\n\n\n\n\tif ((\n\t\tcanReflect.isObservableLike(resolved) && canReflect.isListLike(resolved) ||\n\t\t\t( canReflect.isListLike(resolved) && canReflect.isValueLike(items) )\n\t) && !options.stringOnly) {\n\t\t// Tells that a helper has been called, this function should be returned through\n\t\t// checking its value.\n\t\toptions.metadata.rendered = true;\n\t\treturn function(el){\n\t\t\t// make a child nodeList inside the can.view.live.html nodeList\n\t\t\t// so that if the html is re\n\t\t\tvar nodeList = [el];\n\t\t\tnodeList.expression = \"live.list\";\n\t\t\tnodeLists.register(nodeList, null, options.nodeList, true);\n\t\t\t// runs nest replacements\n\t\t\tnodeLists.update(options.nodeList, [el]);\n\n\t\t\tvar cb = function (item, index, parentNodeList) {\n\t\t\t\tvar aliases = {};\n\n\t\t\t\tif (canReflect.size(hashOptions) > 0) {\n\t\t\t\t\tif (hashOptions.value) {\n\t\t\t\t\t\taliases[hashOptions.value] = item;\n\t\t\t\t\t}\n\t\t\t\t\tif (hashOptions.index) {\n\t\t\t\t\t\taliases[hashOptions.index] = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn options.fn(\n\t\t\t\t\toptions.scope\n\t\t\t\t\t.add(aliases, { notContext: true })\n\t\t\t\t\t.add({ index: index }, { special: true })\n\t\t\t\t\t.add(item),\n\t\t\t\toptions.options,\n\t\t\t\tparentNodeList\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tlive.list(el, items, cb, options.context, el.parentNode, nodeList, function(list, parentNodeList){\n\t\t\t\treturn options.inverse(options.scope.add(list), options.options, parentNodeList);\n\t\t\t});\n\t\t};\n\t}\n\n\tvar expr = helpersCore.resolve(items),\n\t\tresult;\n\n\tif (!!expr && canReflect.isListLike(expr)) {\n\t\tresult = utils.getItemsFragContent(expr, options, options.scope);\n\t\treturn options.stringOnly ? result.join('') : result;\n\t} else if (canReflect.isObservableLike(expr) && canReflect.isMapLike(expr) || expr instanceof Object) {\n\t\tresult = [];\n\t\tcanReflect.each(expr, function(val, key){\n\t\t\tvar value = new KeyObservable(expr, key);\n\t\t\taliases = {};\n\n\t\t\tif (canReflect.size(hashOptions) > 0) {\n\t\t\t\tif (hashOptions.value) {\n\t\t\t\t\taliases[hashOptions.value] = value;\n\t\t\t\t}\n\t\t\t\tif (hashOptions.key) {\n\t\t\t\t\taliases[hashOptions.key] = key;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.push(options.fn(\n\t\t\t\toptions.scope\n\t\t\t\t.add(aliases, { notContext: true })\n\t\t\t\t.add({ key: key }, { special: true })\n\t\t\t\t.add(value)\n\t\t\t));\n\t\t});\n\n\t\treturn options.stringOnly ? result.join('') : result;\n\t}\n};\neachHelper.isLiveBound = true;\neachHelper.requiresOptionsArgument = true;\neachHelper.ignoreArgLookup = function ignoreArgLookup(index) {\n\treturn index === 1;\n};\n\n// ### index\n// This is legacy for `{{index(5)}}`\nvar indexHelper = assign(function indexHelper(offset, options) {\n\tif (!options) {\n\t\toptions = offset;\n\t\toffset = 0;\n\t}\n\tvar index = options.scope.peek(\"scope.index\");\n\treturn \"\"+((typeof(index) === \"function\" ? index() : index) + offset);\n}, {requiresOptionsArgument: true});\n\n// ### WITH HELPER\nvar withHelper = function (expr, options) {\n\tvar ctx = expr;\n\tif(!options) {\n\t\t// hash-only case if no current context expression\n\t\toptions = expr;\n\t\texpr = true;\n\t\tctx = options.hash;\n\t} else {\n\t\texpr = helpersCore.resolve(expr);\n\t\tif(options.hash && canReflect.size(options.hash) > 0) {\n\t\t\t// presumably rare case of both a context object AND hash keys\n\t\t\t// Leaving it undocumented for now, but no reason not to support it.\n\t\t\tctx = options.scope.add(options.hash, { notContext: true }).add(ctx);\n\t\t}\n\t}\n\treturn options.fn(ctx || {});\n};\nwithHelper.requiresOptionsArgument = true;\n\n// ### data helper\nvar dataHelper = function(attr, value) {\n\tvar data = (helpersCore.looksLikeOptions(value) ? value.context : value) || this;\n\treturn function setData(el) {\n\t\t//!steal-remove-start\n\t\tif (process.env.NODE_ENV !== 'production') {\n\t\t\tdev.warn('The {{data}} helper has been deprecated; use {{domData}} instead: https://canjs.com/doc/can-stache.helpers.domData.html');\n\t\t}\n\t\t//!steal-remove-end\n\t\tdomDataState.set.call( el, attr, data );\n\t};\n};\n\n// ## UNLESS HELPER\nvar unlessHelper = function (expr, options) {\n\treturn ifHelper.apply(this, [expr, assign(assign({}, options), {\n\t\tfn: options.inverse,\n\t\tinverse: options.fn\n\t})]);\n};\nunlessHelper.requiresOptionsArgument = true;\nunlessHelper.isLiveBound = true;\n\n\n// ## Register as defaults\n\nvar builtInHelpers = {\n\t'debugger': debuggerHelper,\n\teach: eachHelper,\n\teachOf: eachHelper,\n\tindex: indexHelper,\n\t'if': ifHelper,\n\tis: isHelper,\n\teq: isHelper,\n\tunless: unlessHelper,\n\t'with': withHelper,\n\tconsole: console,\n\tdata: dataHelper,\n\tdomData: domDataHelper,\n\t'switch': switchHelper,\n\tjoinBase: joinBaseHelper,\n\tand: andHelper,\n\tor: orHelper\n};\n\n\n// add all the built-in helpers when stache is loaded\nhelpersCore.addBuiltInHelpers();\n\nmodule.exports = helpersCore;\n"],"names":["globals","define","global","getKeyValue","domDocument","baseURI","location","href","lastSlash","lastIndexOf","substr","process","cwd","makeExport","namespace","joinURIs","base","parseURI","protocol","authority","input","pathname","charAt","slice","output","replace","p","pop","push","join","search","hash","noop","resolveValue","evaluateArgs","__testing","env","NODE_ENV","canReflect","require$$0","canSymbol","require$$1","allowDebugger","value","for","getValue","left","right","arguments","length","canLog","log","Error","debuggerHelper","apply","Array","prototype","call","warn","requiresOptionsArgument","helper","observable","Observation","data","WeakMap","deleteNode","node","nodeDeleted","has","delete","domData","_data","get","key","store","undefined","set","name","clean","prop","itemData","obj","isEmptyObject","module","bindAndRead","isValueLike","temporarilyBind","forOfObject","object","variableName","options","result","each","val","KeyObservable","variableScope","fn","scope","add","special","addLetContext","stringOnly","forHelper","helperOptions","exprData","argExprs","valueObservable","helperExpr","expr","expression","Lookup","Helper","methodExpr","items","resolved","isListLike","parts","eachIndex","index","metadata","rendered","el","nodeList","nodeLists","register","update","live","list","item","parentNodeList","context","parentNode","inverse","isVariable","_meta","variable","isLiveBound","ignoreArgLookup","helpers","getScope","assignMap","_context","document","createTextNode","builtInHelpers","helpersCore","looksLikeOptions","resolve","resolveHash","params","registerHelper","callback","dev","registerHelpers","makeSimpleHelper","realArgs","isComputed","this","addHelper","addLiveHelper","getHelper","__resetHelpers","addBuiltInHelpers","helperName","_makeLogicHelper","logic","logicHelper","assign","args","callLogic","Object","defineProperty","map","arg","getName","configurable","callFn","ifHelper","TruthyObservable","isHelper","curValue","lastValue","i","andHelper","last","len","orHelper","switchHelper","found","caseHelper","peek","defaultHelper","assignSymbols","can.isValueLike","can.isFunctionLike","can.getValue","newScope","case","default","notContext","domDataHelper","attr","joinBaseHelper","firstExpr","moduleReference","templateModule","templateContext","parentAddress","uri","baseURL","System","renderingBaseURL","getBaseURL","eachHelper","hashOptions","aliases","hashExprs","size","eachKey","exprs","isObservableLike","utils","getItemsFragContent","isMapLike","indexHelper","offset","withHelper","ctx","dataHelper","domDataState","unlessHelper","debugger","eachOf","if","is","eq","unless","with","console","switch","joinBase","and","or"],"mappings":"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"}