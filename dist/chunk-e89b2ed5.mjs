import"./chunk-5f1245ff.mjs";import{a as makeSimpleStore}from"./chunk-b52ac488.mjs";import"./chunk-805ffcb4.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";import{a as namespace}from"./chunk-3b4c7b38.mjs";var canLocalStore=namespace.localStore=function e(t){t.constructor=e;var r=Object.create(makeSimpleStore(t));return canReflect.assignMap(r,{clear:function(){return localStorage.removeItem(this.name+"/queries"),localStorage.removeItem(this.name+"/records"),this._recordsMap=null,Promise.resolve()},updateQueryDataSync:function(e){localStorage.setItem(this.name+"/queries",JSON.stringify(e))},getQueryDataSync:function(){return JSON.parse(localStorage.getItem(this.name+"/queries"))||[]},getRecord:function(e){return this._recordsMap||this.getAllRecords(),this._recordsMap[e]},getAllRecords:function(){if(!this.cacheLocalStorageReads||!this._recordsMap){var e=JSON.parse(localStorage.getItem(this.name+"/records"))||{};this._recordsMap=e}var t=[];for(var r in this._recordsMap)t.push(this._recordsMap[r]);return t},destroyRecords:function(e){this._recordsMap||this.getAllRecords(),canReflect.eachIndex(e,function(e){var t=canReflect.getIdentity(e,this.queryLogic.schema);delete this._recordsMap[t]},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))},updateRecordsSync:function(e){this._recordsMap||this.getAllRecords(),e.forEach(function(e){var t=canReflect.getIdentity(e,this.queryLogic.schema);this._recordsMap[t]=e},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))}}),r};export{canLocalStore as a,canLocalStore as b};
//# sourceMappingURL=chunk-e89b2ed5.js.map
