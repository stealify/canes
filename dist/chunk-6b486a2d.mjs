import{a as getDocument}from"./chunk-14877182.mjs";import{a as domMutateNode}from"./chunk-d056b3d5.mjs";import"./chunk-805ffcb4.mjs";import{a as getMutationObserver}from"./chunk-fea13b24.mjs";import{a as namespace}from"./chunk-3b4c7b38.mjs";var processNodes=function(e,t,a,n){for(var c=n.createDocumentFragment(),o=0,r=e.length;o<r;o++){var l=e[o];c.appendChild(processNode(l,t,a.concat(o),n))}return c},keepsTextNodes="undefined"!=typeof document&&function(){var e=document.createDocumentFragment(),t=document.createElement("div");return t.appendChild(document.createTextNode("")),t.appendChild(document.createTextNode("")),e.appendChild(t),2===e.cloneNode(!0).firstChild.childNodes.length}(),clonesWork="undefined"!=typeof document&&function(){var e=document.createElement("a");e.innerHTML="<xyz></xyz>";var t,a,n=e.cloneNode(!0),c="<xyz></xyz>"===n.innerHTML;return c?((e=document.createDocumentFragment()).appendChild(document.createTextNode("foo-bar")),(t=getMutationObserver())?((a=new t(function(){})).observe(document.documentElement,{childList:!0,subtree:!0}),n=e.cloneNode(!0),a.disconnect()):n=e.cloneNode(!0),1===n.childNodes.length):c}(),namespacesWork="undefined"!=typeof document&&!!document.createElementNS,cloneNode=clonesWork?function(e){return e.cloneNode(!0)}:function(e){var t,a=e.ownerDocument;if(1===e.nodeType?t="http://www.w3.org/1999/xhtml"!==e.namespaceURI&&namespacesWork&&a.createElementNS?a.createElementNS(e.namespaceURI,e.nodeName):a.createElement(e.nodeName):3===e.nodeType?t=a.createTextNode(e.nodeValue):8===e.nodeType?t=a.createComment(e.nodeValue):11===e.nodeType&&(t=a.createDocumentFragment()),e.attributes)for(var n=e.attributes,c=0;c<n.length;c++){var o=n[c];o&&o.specified&&domMutateNode.setAttribute.call(t,o.nodeName||o.name,o.nodeValue||o.value)}if(e&&e.firstChild)for(var r=e.firstChild;r;)t.appendChild(cloneNode(r)),r=r.nextSibling;return t};function processNode(e,t,a,n){var c,o,r,l,s,d=a,i=typeof e,m=function(){return c||(c={path:a,callbacks:[]},t.push(c),d=[]),c};if("object"===i){if(e.tag){if(o=namespacesWork&&e.namespace?n.createElementNS(e.namespace,e.tag):n.createElement(e.tag),e.attrs)for(var u in e.attrs){var p=e.attrs[u];"function"==typeof p?m().callbacks.push({callback:p}):domMutateNode.setAttribute.call(o,u,p)}if(e.attributes)for(l=0,s=e.attributes.length;l<s;l++)m().callbacks.push({callback:e.attributes[l]});e.children&&e.children.length&&(r=c?c.paths=[]:t,o.appendChild(processNodes(e.children,r,d,n)))}else if(e.comment&&(o=n.createComment(e.comment),e.callbacks))for(l=0,s=e.attributes.length;l<s;l++)m().callbacks.push({callback:e.callbacks[l]})}else"string"===i?o=n.createTextNode(e):"function"===i&&(keepsTextNodes?(o=n.createTextNode(""),m().callbacks.push({callback:e})):(o=n.createComment("~"),m().callbacks.push({callback:function(){var t=n.createTextNode("");return domMutateNode.replaceChild.call(this.parentNode,t,this),e.apply(t,arguments)}})));return o}function getCallbacks(e,t,a){for(var n=t.path,c=t.callbacks,o=t.paths,r=e,l=n?n.length:0,s=o?o.length:0,d=0;d<l;d++)r=r.childNodes.item(n[d]);for(d=0;d<s;d++)getCallbacks(r,o[d],a);a.push({element:r,callbacks:c})}function hydrateCallbacks(e,t){for(var a,n,c,o=e.length,r=0;r<o;r++){a=(c=e[r]).callbacks.length,n=c.element;for(var l=0;l<a;l++)c.callbacks[l].callback.apply(n,t)}}function makeTarget(e,t){var a=[],n=processNodes(e,a,[],t||getDocument());return{paths:a,clone:n,hydrate:function(){for(var e=cloneNode(this.clone),t=[],n=0,c=t.length=arguments.length;n<c;n++)t[n]=arguments[n];for(var o=[],r=0;r<a.length;r++)getCallbacks(e,a[r],o);return hydrateCallbacks(o,t),e}}}makeTarget.keepsTextNodes=keepsTextNodes,makeTarget.cloneNode=cloneNode,namespace.view=namespace.view||{};var canViewTarget=namespace.view.target=makeTarget;export{canViewTarget as a,canViewTarget as b};
//# sourceMappingURL=chunk-6b486a2d.js.map
