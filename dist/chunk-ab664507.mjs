import{a as commonjsGlobal,b as commonjsRequire,c as unwrapExports,d as createCommonjsModule}from"./chunk-eae5b219.mjs";import{a as canSymbol}from"./chunk-b37d91a1.mjs";import"./chunk-5f1245ff.mjs";import"./chunk-f8a6947c.mjs";import"./chunk-fa6b878a.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";import{a as mapEventBindings}from"./chunk-910f3205.mjs";import{a as ObservationRecorder}from"./chunk-8811d387.mjs";var kefir=createCommonjsModule(function(t,n){!function(t){function n(t){var n=arguments.length,e=void 0,i=void 0;for(e=1;e<n;e++)for(i in arguments[e])t[i]=arguments[e][i];return t}function e(t,e){var i,r,s=arguments.length,o=void 0;for(t.prototype=(i=e.prototype,(r=function(){}).prototype=i,new r),t.prototype.constructor=t,o=2;o<s;o++)n(t.prototype,arguments[o]);return t}var i=["<nothing>"],r="end",s="value",o="error",u="any";function a(t,n){var e=void 0,i=void 0,r=void 0,s=void 0;if(0===t.length)return n;if(0===n.length)return t;for(s=0,e=new Array(t.length+n.length),i=t.length,r=0;r<i;r++,s++)e[s]=t[r];for(i=n.length,r=0;r<i;r++,s++)e[s]=n[r];return e}function h(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)if(t[i]===n)return i;return-1}function l(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)if(n(t[i]))return i;return-1}function f(t){var n=t.length,e=new Array(n),i=void 0;for(i=0;i<n;i++)e[i]=t[i];return e}function _(t,n){var e=t.length,i=void 0,r=void 0,s=void 0;if(n>=0&&n<e){if(1===e)return[];for(i=new Array(e-1),r=0,s=0;r<e;r++)r!==n&&(i[s]=t[r],s++);return i}return t}function c(t,n){var e=t.length,i=new Array(e),r=void 0;for(r=0;r<e;r++)i[r]=n(t[r]);return i}function d(t,n,e){t===u?n(e):t===e.type&&(t===s||t===o?n(e.value):n())}function v(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function m(){this._dispatcher=new v,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function p(){m.call(this)}function y(){m.call(this),this._currentEvent=null}n(v.prototype,{add:function(t,n){return this._items=a(this._items,[{type:t,fn:n}]),this._items.length},remove:function(t,n){var e=l(this._items,function(e){return e.type===t&&e.fn===n});return 0!==this._inLoop&&-1!==e&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[e])),this._items=_(this._items,e),this._items.length},addSpy:function(t){return this._spies=a(this._spies,[t]),this._spies.length},removeSpy:function(t){return this._spies=_(this._spies,this._spies.indexOf(t)),this._spies.length},dispatch:function(t){this._inLoop++;for(var n=0,e=this._spies;null!==this._spies&&n<e.length;n++)e[n](t);for(var i=0,r=this._items;i<r.length&&null!==this._items;i++)null!==this._removedItems&&(s=this._removedItems,o=r[i],-1!==h(s,o))||d(r[i].type,r[i].fn,t);var s,o;this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),n(m.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(t){this._active!==t&&(this._active=t,t?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(t,n){switch(t){case s:return this._emitValue(n);case o:return this._emitError(n);case r:return this._emitEnd()}},_emitValue:function(t){this._alive&&this._dispatcher.dispatch({type:s,value:t})},_emitError:function(t){this._alive&&this._dispatcher.dispatch({type:o,value:t})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:r}),this._clear())},_on:function(t,n){return this._alive?(this._dispatcher.add(t,n),this._setActive(!0)):d(t,n,{type:r}),this},_off:function(t,n){if(this._alive){var e=this._dispatcher.remove(t,n);0===e&&this._setActive(!1)}return this},onValue:function(t){return this._on(s,t)},onError:function(t){return this._on(o,t)},onEnd:function(t){return this._on(r,t)},onAny:function(t){return this._on(u,t)},offValue:function(t){return this._off(s,t)},offError:function(t){return this._off(o,t)},offEnd:function(t){return this._off(r,t)},offAny:function(t){return this._off(u,t)},observe:function(t,n,e){var i=this,u=!1,a=t&&"function"!=typeof t?t:{value:t,error:n,end:e},h=function(t){t.type===r&&(u=!0),t.type===s&&a.value?a.value(t.value):t.type===o&&a.error?a.error(t.value):t.type===r&&a.end&&a.end(t.value)};return this.onAny(h),{unsubscribe:function(){u||(i.offAny(h),u=!0)},get closed(){return u}}},_ofSameType:function(t,n){return t.prototype.getType()===this.getType()?t:n},setName:function(t,n){return this._name=n?t._name+"."+n:t,this},log:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),n=void 0,e=function(e){var i="<"+e.type+(n?":current":"")+">";e.type===r?console.log(t,i):console.log(t,i,e.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:t,handler:e})),n=!0,this.onAny(e),n=!1,this},offLog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var n=l(this._logHandlers,function(n){return n.name===t});-1!==n&&(this.offAny(this._logHandlers[n].handler),this._logHandlers.splice(n,1))}return this},spy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),n=function(n){var e="<"+n.type+">";n.type===r?console.log(t,e):console.log(t,e,n.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:t,handler:n}),this._dispatcher.addSpy(n)),this},offSpy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var n=l(this._spyHandlers,function(n){return n.name===t});-1!==n&&(this._dispatcher.removeSpy(this._spyHandlers[n].handler),this._spyHandlers.splice(n,1))}return this}}),m.prototype.toString=function(){return"["+this._name+"]"},e(p,m,{_name:"stream",getType:function(){return"stream"}}),e(y,m,{_name:"property",_emitValue:function(t){this._alive&&(this._currentEvent={type:s,value:t},this._activating||this._dispatcher.dispatch({type:s,value:t}))},_emitError:function(t){this._alive&&(this._currentEvent={type:o,value:t},this._activating||this._dispatcher.dispatch({type:o,value:t}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:r}),this._clear())},_on:function(t,n){return this._alive&&(this._dispatcher.add(t,n),this._setActive(!0)),null!==this._currentEvent&&d(t,n,this._currentEvent),this._alive||d(t,n,{type:r}),this},getType:function(){return"property"}});var E=new p;function g(){return E}function b(t){function n(t,n){var e=this;p.call(this),this._wait=t,this._intervalId=null,this._$onTick=function(){return e._onTick()},this._init(n)}return e(n,p,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){p.prototype._clear.call(this),this._$onTick=null,this._free()}},t),n}E._emitEnd(),E._name="never";var w=b({_name:"later",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});function A(t,n){return new w(t,{x:n})}var V=b({_name:"interval",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});function S(t,n){return new V(t,{x:n})}var T=b({_name:"sequentially",_init:function(t){var n=t.xs;this._xs=f(n)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});function k(t,n){return 0===n.length?g():new T(t,{xs:n})}var $=b({_name:"fromPoll",_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_onTick:function(){var t=this._fn;this._emitValue(t())}});function C(t,n){return new $(t,{fn:n})}function O(t){function n(n){return t._emitValue(n),t._active}function e(n){return t._emit(n.type,n.value),t._active}return{value:n,error:function(n){return t._emitError(n),t._active},end:function(){return t._emitEnd(),t._active},event:e,emit:n,emitEvent:e}}var I=b({_name:"withInterval",_init:function(t){var n=t.fn;this._fn=n,this._emitter=O(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){var t=this._fn;t(this._emitter)}});function x(t,n){return new I(t,{fn:n})}function L(t){p.call(this),this._fn=t,this._unsubscribe=null}function P(t){return new L(t)}function H(t){var n=!1;return P(function(e){n||(t(function(t){e.emit(t),e.end()}),n=!0)}).setName("fromCallback")}function M(t){var n=!1;return P(function(e){n||(t(function(t,n){t?e.error(t):e.emit(n),e.end()}),n=!0)}).setName("fromNodeCallback")}function j(t,n){switch(n){case 0:return function(){return t()};case 1:return function(n){return t(n[0])};case 2:return function(n){return t(n[0],n[1])};case 3:return function(n){return t(n[0],n[1],n[2])};case 4:return function(n){return t(n[0],n[1],n[2],n[3])};default:return function(n){return t.apply(null,n)}}}e(L,p,{_name:"stream",_onActivation:function(){var t=this._fn,n=t(O(this));this._unsubscribe="function"==typeof n?n:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){p.prototype._clear.call(this),this._fn=null}});var D=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];function K(t,n,e){for(var i=void 0,r=void 0,s=0;s<D.length;s++)if("function"==typeof t[D[s][0]]&&"function"==typeof t[D[s][1]]){i=D[s][0],r=D[s][1];break}if(void 0===i)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return function(t,n,e){return P(function(i){var r=e?function(){i.emit(function(t,n,e){var i=e?e.length:0;if(null==n)switch(i){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3]);default:return t.apply(null,e)}else switch(i){case 0:return t.call(n);default:return t.apply(n,e)}}(e,this,arguments))}:function(t){i.emit(t)};return t(r),function(){return n(r)}}).setName("fromSubUnsub")}(function(e){return t[i](n,e)},function(e){return t[r](n,e)},e).setName("fromEvents")}function N(t){this._currentEvent={type:"value",value:t,current:!0}}function B(t){return new N(t)}function q(t){this._currentEvent={type:"error",value:t,current:!0}}function W(t){return new q(t)}function U(t,n){return function(e,i){var r=this;t.call(this),this._source=e,this._name=e._name+"."+n,this._init(i),this._$handleAny=function(t){return r._handleAny(t)}}}function F(t){return{_init:function(){},_free:function(){},_handleValue:function(t){this._emitValue(t)},_handleError:function(t){this._emitError(t)},_handleEnd:function(){this._emitEnd()},_handleAny:function(t){switch(t.type){case s:return this._handleValue(t.value);case o:return this._handleError(t.value);case r:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){t.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function Q(t,n){var i=U(p,t);return e(i,p,F(p),n),i}function R(t,n){var i=U(y,t);return e(i,y,F(y),n),i}e(N,y,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),e(q,y,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var z=R("toProperty",{_init:function(t){var n=t.fn;this._getInitialCurrent=n},_onActivation:function(){if(null!==this._getInitialCurrent){var t=this._getInitialCurrent;this._emitValue(t())}this._source.onAny(this._$handleAny)}});function Y(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==n&&"function"!=typeof n)throw new Error("You should call toProperty() with a function or no arguments.");return new z(t,{fn:n})}var G=Q("changes",{_handleValue:function(t){this._activating||this._emitValue(t)},_handleError:function(t){this._activating||this._emitError(t)}});function J(t){var n=!1,e=P(function(e){if(!n){var i=t.then(function(t){e.emit(t),e.end()},function(t){e.error(t),e.end()});i&&"function"==typeof i.done&&i.done(),n=!0}});return Y(e,null).setName("fromPromise")}function X(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}var Z="undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:{};function tt(t,n){return t(n={exports:{}},n.exports),n.exports}var nt=tt(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var n,e=t.Symbol;return"function"==typeof e?e.observable?n=e.observable:(n=e("observable"),e.observable=n):n="@@observable",n}}),et=tt(function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var e,i,r=(e=nt)&&e.__esModule?e:{default:e};i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Z?Z:t;var s=(0,r.default)(i);n.default=s}),it=et.default?et.default:et;function rt(t){var n=t[it]?t[it]():t;return P(function(t){var e=n.subscribe({error:function(n){t.error(n),t.end()},next:function(n){t.emit(n)},complete:function(){t.end()}});return e.unsubscribe?function(){e.unsubscribe()}:e}).setName("fromESObservable")}function st(t){this._observable=t.takeErrors(1)}function ot(){return new st(this)}function ut(t,n,e){for(var i in t)t.hasOwnProperty(i)&&(n.push(i),e.push(t[i]))}function at(t,n,e){var r=this;p.call(this),this._activeCount=t.length,this._sources=a(t,n),this._combinator=e,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),function(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)t[i]=n}(this._latestValues,i),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var s=function(t){r._$handlers.push(function(n){return r._handleAny(t,n)})},o=0;o<this._sources.length;o++)s(o)}function ht(t,n,e){return"function"==typeof n&&(e=n,n=void 0),Array.isArray(t)?function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments[2];if(!Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");return e=e?j(e,t.length+n.length):function(t){return t},0===t.length?g():new at(t,n,e)}(t,n,e):function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments[2];if("object"!=typeof n||Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");var i=[],r=[],s=[];return ut(t,i,r),ut(n,i,s),0===r.length?g():new at(r,s,function(t){for(var n={},r=t.length-1;0<=r;r--)n[i[r]]=t[r];return e?e(n):n})}(t,n,e)}n(st.prototype,{subscribe:function(t,n,e){var i=this,u="function"==typeof t?{next:t,error:n,complete:e}:t,a=function(t){t.type===r&&(h=!0),t.type===s&&u.next?u.next(t.value):t.type===o&&u.error?u.error(t.value):t.type===r&&u.complete&&u.complete(t.value)};this._observable.onAny(a);var h=!1,l={unsubscribe:function(){h=!0,i._observable.offAny(a)},get closed(){return h}};return l}}),st.prototype[it]=function(){return this},e(at,p,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var t=this._activeCount;t<this._sources.length;t++)this._sources[t].onAny(this._$handlers[t]);for(var n=0;n<this._activeCount;n++)this._sources[n].onAny(this._$handlers[n]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var t=this._sources.length,n=void 0;for(n=0;n<t;n++)this._sources[n].offAny(this._$handlers[n])},_emitIfFull:function(){for(var t=!0,n=!1,e=this._latestValues.length,r=new Array(e),s=new Array(e),o=0;o<e;o++)r[o]=this._latestValues[o],s[o]=this._latestErrors[o],r[o]===i&&(t=!1),void 0!==s[o]&&(n=!0);if(t){var u=this._combinator;this._emitValue(u(r))}n&&this._emitError(function(t){for(var n=void 0,e=0;e<t.length;e++)void 0!==t[e]&&(void 0===n||n.index<t[e].index)&&(n=t[e]);return n.error}(s))},_handleAny:function(t,n){n.type===s||n.type===o?(n.type===s&&(this._latestValues[t]=n.value,this._latestErrors[t]=void 0),n.type===o&&(this._latestValues[t]=i,this._latestErrors[t]={index:this._latestErrorIndex++,error:n.value}),t<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):t<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){p.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var lt={empty:function(){return g()},concat:function(t,n){return t.merge(n)},of:function(t){return B(t)},map:function(t,n){return n.map(t)},bimap:function(t,n,e){return e.mapErrors(t).map(n)},ap:function(t,n){return ht([t,n],function(t,n){return t(n)})},chain:function(t,n){return n.flatMap(t)}},ft=Object.freeze({Observable:lt}),_t={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;this._emitValue(n(t))}},ct=Q("map",_t),dt=R("map",_t),vt=function(t){return t};function mt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt;return new(t._ofSameType(ct,dt))(t,{fn:n})}var pt={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;n(t)&&this._emitValue(t)}},yt=Q("filter",pt),Et=R("filter",pt),gt=function(t){return t},bt={_init:function(t){var n=t.n;this._n=n,n<=0&&this._emitEnd()},_handleValue:function(t){0!==this._n&&(this._n--,this._emitValue(t),0===this._n&&this._emitEnd())}},wt=Q("take",bt),At=R("take",bt),Vt={_init:function(t){var n=t.n;this._n=n,n<=0&&this._emitEnd()},_handleError:function(t){0!==this._n&&(this._n--,this._emitError(t),0===this._n&&this._emitEnd())}},St=Q("takeErrors",Vt),Tt=R("takeErrors",Vt),kt={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;n(t)?this._emitValue(t):this._emitEnd()}},$t=Q("takeWhile",kt),Ct=R("takeWhile",kt),Ot=function(t){return t},It={_init:function(){this._lastValue=i},_free:function(){this._lastValue=null},_handleValue:function(t){this._lastValue=t},_handleEnd:function(){this._lastValue!==i&&this._emitValue(this._lastValue),this._emitEnd()}},xt=Q("last",It),Lt=R("last",It),Pt={_init:function(t){var n=t.n;this._n=Math.max(0,n)},_handleValue:function(t){0===this._n?this._emitValue(t):this._n--}},Ht=Q("skip",Pt),Mt=R("skip",Pt),jt={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;null===this._fn||n(t)||(this._fn=null),null===this._fn&&this._emitValue(t)}},Dt=Q("skipWhile",jt),Kt=R("skipWhile",jt),Nt=function(t){return t},Bt={_init:function(t){var n=t.fn;this._fn=n,this._prev=i},_free:function(){this._fn=null,this._prev=null},_handleValue:function(t){var n=this._fn;this._prev!==i&&n(this._prev,t)||(this._prev=t,this._emitValue(t))}},qt=Q("skipDuplicates",Bt),Wt=R("skipDuplicates",Bt),Ut=function(t,n){return t===n};function Ft(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ut;return new(t._ofSameType(qt,Wt))(t,{fn:n})}var Qt={_init:function(t){var n=t.fn,e=t.seed;this._fn=n,this._prev=e},_free:function(){this._prev=null,this._fn=null},_handleValue:function(t){if(this._prev!==i){var n=this._fn;this._emitValue(n(this._prev,t))}this._prev=t}},Rt=Q("diff",Qt),zt=R("diff",Qt);function Yt(t,n){return[t,n]}var Gt=R("scan",{_init:function(t){var n=t.fn,e=t.seed;this._fn=n,this._seed=e,e!==i&&this._emitValue(e)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(t){var n=this._fn;null===this._currentEvent||this._currentEvent.type===o?this._emitValue(this._seed===i?t:n(this._seed,t)):this._emitValue(n(this._currentEvent.value,t))}}),Jt=Q("flatten",{_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){for(var n=this._fn,e=n(t),i=0;i<e.length;i++)this._emitValue(e[i])}}),Xt=function(t){return t},Zt={},tn={_init:function(t){var n=this,e=t.wait;this._wait=Math.max(0,e),this._buff=[],this._$shiftBuff=function(){var t=n._buff.shift();t===Zt?n._emitEnd():n._emitValue(t)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._buff.push(t),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(Zt),setTimeout(this._$shiftBuff,this._wait))}},nn=Q("delay",tn),en=R("delay",tn),rn=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},sn={_init:function(t){var n=this,e=t.wait,i=t.leading,r=t.trailing;this._wait=Math.max(0,e),this._leading=i,this._trailing=r,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return n._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(t){if(this._activating)this._emitValue(t);else{var n=rn();0!==this._lastCallTime||this._leading||(this._lastCallTime=n);var e=this._wait-(n-this._lastCallTime);e<=0?(this._cancelTrailing(),this._lastCallTime=n,this._emitValue(t)):this._trailing&&(this._cancelTrailing(),this._trailingValue=t,this._timeoutId=setTimeout(this._$trailingCall,e))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?rn():0,this._endLater&&this._emitEnd()}},on=Q("throttle",sn),un=R("throttle",sn),an={_init:function(t){var n=this,e=t.wait,i=t.immediate;this._wait=Math.max(0,e),this._immediate=i,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return n._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._lastAttempt=rn(),this._immediate&&!this._timeoutId&&this._emitValue(t),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=t))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var t=rn()-this._lastAttempt;t<this._wait&&t>=0?this._timeoutId=setTimeout(this._$later,this._wait-t):(this._timeoutId=null,this._immediate||(this._emitValue(this._laterValue),this._laterValue=null),this._endLater&&this._emitEnd())}},hn=Q("debounce",an),ln=R("debounce",an),fn={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=this._fn;this._emitError(n(t))}},_n=Q("mapErrors",fn),cn=R("mapErrors",fn),dn=function(t){return t},vn={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=this._fn;n(t)&&this._emitError(t)}},mn=Q("filterErrors",vn),pn=R("filterErrors",vn),yn=function(t){return t},En={_handleValue:function(){}},gn=Q("ignoreValues",En),bn=R("ignoreValues",En),wn={_handleError:function(){}},An=Q("ignoreErrors",wn),Vn=R("ignoreErrors",wn),Sn={_handleEnd:function(){}},Tn=Q("ignoreEnd",Sn),kn=R("ignoreEnd",Sn),$n={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleEnd:function(){var t=this._fn;this._emitValue(t()),this._emitEnd()}},Cn=Q("beforeEnd",$n),On=R("beforeEnd",$n),In={_init:function(t){var n=t.min,e=t.max;this._max=e,this._min=n,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(t){this._buff=function(t,n,e){var i=Math.min(e,t.length+1),r=t.length-i+1,s=new Array(i),o=void 0;for(o=r;o<i;o++)s[o-r]=t[o];return s[i-1]=n,s}(this._buff,t,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},xn=Q("slidingWindow",In),Ln=R("slidingWindow",In),Pn={_init:function(t){var n=t.fn,e=t.flushOnEnd;this._fn=n,this._flushOnEnd=e,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t);var n=this._fn;n(t)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Hn=Q("bufferWhile",Pn),Mn=R("bufferWhile",Pn),jn=function(t){return t},Dn={_init:function(t){var n=t.count,e=t.flushOnEnd;this._count=n,this._flushOnEnd=e,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Kn=Q("bufferWithCount",Dn),Nn=R("bufferWithCount",Dn),Bn={_init:function(t){var n=this,e=t.wait,i=t.count,r=t.flushOnEnd;this._wait=e,this._count=i,this._flushOnEnd=r,this._intervalId=null,this._$onTick=function(){return n._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},qn=Q("bufferWithTimeOrCount",Bn),Wn=R("bufferWithTimeOrCount",Bn),Un={_init:function(t){var n,e=t.transducer;this._xform=e((n=this,{"@@transducer/step":function(t,e){return n._emitValue(e),null},"@@transducer/result":function(){return n._emitEnd(),null}}))},_free:function(){this._xform=null},_handleValue:function(t){null!==this._xform["@@transducer/step"](null,t)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},Fn=Q("transduce",Un),Qn=R("transduce",Un),Rn={_init:function(t){var n=t.fn;this._handler=n,this._emitter=O(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(t){this._handler(this._emitter,t)}},zn=Q("withHandler",Rn),Yn=R("withHandler",Rn),Gn=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Jn(t,n){var e=this;p.call(this),this._buffers=c(t,function(t){return Gn(t)?f(t):[]}),this._sources=c(t,function(t){return Gn(t)?g():t}),this._combinator=n?j(n,this._sources.length):function(t){return t},this._aliveCount=0,this._$handlers=[];for(var i=function(t){e._$handlers.push(function(n){return e._handleAny(t,n)})},r=0;r<this._sources.length;r++)i(r)}function Xn(t,n){return 0===t.length?g():new Jn(t,n)}e(Jn,p,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var t=this._sources.length;this._aliveCount=t;for(var n=0;n<t&&this._active;n++)this._sources[n].onAny(this._$handlers[n])},_onDeactivation:function(){for(var t=0;t<this._sources.length;t++)this._sources[t].offAny(this._$handlers[t])},_emit:function(){for(var t=new Array(this._buffers.length),n=0;n<this._buffers.length;n++)t[n]=this._buffers[n].shift();var e=this._combinator;this._emitValue(e(t))},_isFull:function(){for(var t=0;t<this._buffers.length;t++)if(0===this._buffers[t].length)return!1;return!0},_handleAny:function(t,n){n.type===s&&(this._buffers[t].push(n.value),this._isFull()&&this._emit()),n.type===o&&this._emitError(n.value),n.type===r&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){p.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var Zn=function(t){return t};function te(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.queueLim,i=void 0===e?0:e,r=n.concurLim,s=void 0===r?-1:r,o=n.drop,u=void 0===o?"new":o;p.call(this),this._queueLim=i<0?-1:i,this._concurLim=s<0?-1:s,this._drop=u,this._queue=[],this._curSources=[],this._$handleSubAny=function(n){return t._handleSubAny(n)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function ne(t){te.call(this),this._addAll(t),this._initialised=!0}function ee(t){return 0===t.length?g():new ne(t)}function ie(t){var n=this;p.call(this),this._generator=t,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(t){return n._handleAny(t)}}e(te,p,{_name:"abstractPool",_add:function(t,n){n=n||Zn,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(n(t)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(n(t)):"old"===this._drop&&(this._removeOldest(),this._add(t,n))},_addAll:function(t){var n=this;!function(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)n(t[i])}(t,function(t){return n._add(t)})},_remove:function(t){-1===this._removeCur(t)&&this._removeQueue(t)},_addToQueue:function(t){this._queue=a(this._queue,[t])},_addToCur:function(t){if(this._active){if(!t._alive)return t._currentEvent&&this._emit(t._currentEvent.type,t._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));this._currentlyAdding=t,t.onAny(this._$handleSubAny),this._currentlyAdding=null,t._alive&&(this._curSources=a(this._curSources,[t]),this._active&&this._subToEnd(t))}else this._curSources=a(this._curSources,[t])},_subToEnd:function(t){var n=this,e=function(){return n._removeCur(t)};this._$endHandlers.push({obs:t,handler:e}),t.onEnd(e)},_subscribe:function(t){t.onAny(this._$handleSubAny),this._active&&this._subToEnd(t)},_unsubscribe:function(t){t.offAny(this._$handleSubAny);var n=l(this._$endHandlers,function(n){return n.obs===t});-1!==n&&(t.offEnd(this._$endHandlers[n].handler),this._$endHandlers.splice(n,1))},_handleSubAny:function(t){t.type===s?this._emitValue(t.value):t.type===o&&this._emitError(t.value)},_removeQueue:function(t){var n=h(this._queue,t);return this._queue=_(this._queue,n),n},_removeCur:function(t){this._active&&this._unsubscribe(t);var n=h(this._curSources,t);return this._curSources=_(this._curSources,n),-1!==n&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),n},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=f(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var t=0,n=this._curSources;t<n.length&&this._active;t++)this._subscribe(n[t])},_onDeactivation:function(){for(var t=0,n=this._curSources;t<n.length;t++)this._unsubscribe(n[t]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){p.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),e(ne,te,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),e(ie,p,{_name:"repeat",_handleAny:function(t){t.type===r?(this._source=null,this._getSource()):this._emit(t.type,t.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var t=this._generator;null===this._source&&this._alive&&this._active;)this._source=t(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){p.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var re=function(t){return new ie(t)};function se(t){return re(function(n){return t.length>n&&t[n]}).setName("concat")}function oe(){te.call(this)}function ue(t,n,e){var i=this;te.call(this,e),this._source=t,this._fn=n,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(t){return i._handleMain(t)}}function ae(t,n){ue.call(this,t,n)}function he(t,n){return function(e,r,s){var o=this;t.call(this),this._primary=e,this._secondary=r,this._name=e._name+"."+n,this._lastSecondary=i,this._$handleSecondaryAny=function(t){return o._handleSecondaryAny(t)},this._$handlePrimaryAny=function(t){return o._handlePrimaryAny(t)},this._init(s)}}function le(t){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(t){this._emitValue(t)},_handlePrimaryError:function(t){this._emitError(t)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(t){this._lastSecondary=t},_handleSecondaryError:function(t){this._emitError(t)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(t){switch(t.type){case s:return this._handlePrimaryValue(t.value);case o:return this._handlePrimaryError(t.value);case r:return this._handlePrimaryEnd(t.value)}},_handleSecondaryAny:function(t){switch(t.type){case s:return this._handleSecondaryValue(t.value);case o:return this._handleSecondaryError(t.value);case r:this._handleSecondaryEnd(t.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){t.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function fe(t,n){var i=he(p,t);return e(i,p,le(p),n),i}function _e(t,n){var i=he(y,t);return e(i,y,le(y),n),i}e(oe,te,{_name:"pool",plug:function(t){return this._add(t),this},unplug:function(t){return this._remove(t),this}}),e(ue,te,{_onActivation:function(){te.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){te.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(t){if(t.type===s){var n=this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value;n||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1}t.type===o&&this._emitError(t.value),t.type===r&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){te.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),e(ae,ue,{_handleMain:function(t){if(t.type===o){var n=this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value;n||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1}t.type===s&&this._emitValue(t.value),t.type===r&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var ce={_handlePrimaryValue:function(t){this._lastSecondary!==i&&this._lastSecondary&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary!==i&&this._lastSecondary||this._emitEnd()}},de=fe("filterBy",ce),ve=_e("filterBy",ce),me=function(t,n){return n},pe={_handlePrimaryValue:function(t){this._lastSecondary!==i&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary===i&&this._emitEnd()}},ye=fe("skipUntilBy",pe),Ee=_e("skipUntilBy",pe),ge={_handleSecondaryValue:function(){this._emitEnd()}},be=fe("takeUntilBy",ge),we=_e("takeUntilBy",ge),Ae={_init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.flushOnEnd,e=void 0===n||n;this._buff=[],this._flushOnEnd=e},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(t){this._buff.push(t)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},Ve=fe("bufferBy",Ae),Se=_e("bufferBy",Ae),Te={_init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.flushOnEnd,e=void 0===n||n,i=t.flushOnChange,r=void 0!==i&&i;this._buff=[],this._flushOnEnd=e,this._flushOnChange=r},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(t){this._buff.push(t),this._lastSecondary===i||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==i&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(t){this._flushOnChange&&!t&&this._flush(),this._lastSecondary=t}},ke=fe("bufferWhileBy",Te),$e=_e("bufferWhileBy",Te),Ce=function(){return!1},Oe=function(){return!0},Ie={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn,e=n(t);e.convert?this._emitError(e.error):this._emitValue(t)}},xe=Q("valuesToErrors",Ie),Le=R("valuesToErrors",Ie),Pe=function(t){return{convert:!0,error:t}},He={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=this._fn,e=n(t);e.convert?this._emitValue(e.value):this._emitError(t)}},Me=Q("errorsToValues",He),je=R("errorsToValues",He),De=function(t){return{convert:!0,value:t}},Ke={_handleError:function(t){this._emitError(t),this._emitEnd()}},Ne=Q("endOnError",Ke),Be=R("endOnError",Ke);m.prototype.toProperty=function(t){return Y(this,t)},m.prototype.changes=function(){return new G(this)},m.prototype.toPromise=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X(),e=null;return new n(function(n,i){t.onAny(function(t){t.type===r&&null!==e?((e.type===s?n:i)(e.value),e=null):e=t})})}(this,t)},m.prototype.toESObservable=ot,m.prototype[it]=ot,m.prototype.map=function(t){return mt(this,t)},m.prototype.filter=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt;return new(t._ofSameType(yt,Et))(t,{fn:n})}(this,t)},m.prototype.take=function(t){return function(t,n){return new(t._ofSameType(wt,At))(t,{n:n})}(this,t)},m.prototype.takeErrors=function(t){return function(t,n){return new(t._ofSameType(St,Tt))(t,{n:n})}(this,t)},m.prototype.takeWhile=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot;return new(t._ofSameType($t,Ct))(t,{fn:n})}(this,t)},m.prototype.last=function(){return new((t=this)._ofSameType(xt,Lt))(t);var t},m.prototype.skip=function(t){return function(t,n){return new(t._ofSameType(Ht,Mt))(t,{n:n})}(this,t)},m.prototype.skipWhile=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt;return new(t._ofSameType(Dt,Kt))(t,{fn:n})}(this,t)},m.prototype.skipDuplicates=function(t){return Ft(this,t)},m.prototype.diff=function(t,n){return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return new(t._ofSameType(Rt,zt))(t,{fn:n||Yt,seed:e})}(this,t,n)},m.prototype.scan=function(t,n){return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return new Gt(t,{fn:n,seed:e})}(this,t,n)},m.prototype.flatten=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xt;return new Jt(t,{fn:n})}(this,t)},m.prototype.delay=function(t){return function(t,n){return new(t._ofSameType(nn,en))(t,{wait:n})}(this,t)},m.prototype.throttle=function(t,n){return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.leading,r=void 0===i||i,s=e.trailing,o=void 0===s||s;return new(t._ofSameType(on,un))(t,{wait:n,leading:r,trailing:o})}(this,t,n)},m.prototype.debounce=function(t,n){return function(t,n){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).immediate,i=void 0!==e&&e;return new(t._ofSameType(hn,ln))(t,{wait:n,immediate:i})}(this,t,n)},m.prototype.mapErrors=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn;return new(t._ofSameType(_n,cn))(t,{fn:n})}(this,t)},m.prototype.filterErrors=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;return new(t._ofSameType(mn,pn))(t,{fn:n})}(this,t)},m.prototype.ignoreValues=function(){return new((t=this)._ofSameType(gn,bn))(t);var t},m.prototype.ignoreErrors=function(){return new((t=this)._ofSameType(An,Vn))(t);var t},m.prototype.ignoreEnd=function(){return new((t=this)._ofSameType(Tn,kn))(t);var t},m.prototype.beforeEnd=function(t){return function(t,n){return new(t._ofSameType(Cn,On))(t,{fn:n})}(this,t)},m.prototype.slidingWindow=function(t,n){return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new(t._ofSameType(xn,Ln))(t,{min:e,max:n})}(this,t,n)},m.prototype.bufferWhile=function(t,n){return function(t,n){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,i=void 0===e||e;return new(t._ofSameType(Hn,Mn))(t,{fn:n||jn,flushOnEnd:i})}(this,t,n)},m.prototype.bufferWithCount=function(t,n){return function(t,n){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,i=void 0===e||e;return new(t._ofSameType(Kn,Nn))(t,{count:n,flushOnEnd:i})}(this,t,n)},m.prototype.bufferWithTimeOrCount=function(t,n,e){return function(t,n,e){var i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).flushOnEnd,r=void 0===i||i;return new(t._ofSameType(qn,Wn))(t,{wait:n,count:e,flushOnEnd:r})}(this,t,n,e)},m.prototype.transduce=function(t){return function(t,n){return new(t._ofSameType(Fn,Qn))(t,{transducer:n})}(this,t)},m.prototype.withHandler=function(t){return function(t,n){return new(t._ofSameType(zn,Yn))(t,{fn:n})}(this,t)},m.prototype.thru=function(t){return t(this)},m.prototype.combine=function(t,n){return ht([this,t],n)},m.prototype.zip=function(t,n){return Xn([this,t],n)},m.prototype.merge=function(t){return ee([this,t])},m.prototype.concat=function(t){return se([this,t])};var qe=function(){return new oe};m.prototype.flatMap=function(t){return new ue(this,t).setName(this,"flatMap")},m.prototype.flatMapLatest=function(t){return new ue(this,t,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},m.prototype.flatMapFirst=function(t){return new ue(this,t,{concurLim:1}).setName(this,"flatMapFirst")},m.prototype.flatMapConcat=function(t){return new ue(this,t,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},m.prototype.flatMapConcurLimit=function(t,n){return new ue(this,t,{queueLim:-1,concurLim:n}).setName(this,"flatMapConcurLimit")},m.prototype.flatMapErrors=function(t){return new ae(this,t).setName(this,"flatMapErrors")},m.prototype.filterBy=function(t){return e=t,new((n=this)._ofSameType(de,ve))(n,e);var n,e},m.prototype.sampledBy=function(t,n){return function(t,n,e){return ht([n],[t],e?function(t,n){return e(n,t)}:me).setName(t,"sampledBy")}(this,t,n)},m.prototype.skipUntilBy=function(t){return e=t,new((n=this)._ofSameType(ye,Ee))(n,e);var n,e},m.prototype.takeUntilBy=function(t){return e=t,new((n=this)._ofSameType(be,we))(n,e);var n,e},m.prototype.bufferBy=function(t,n){return function(t,n,e){return new(t._ofSameType(Ve,Se))(t,n,e)}(this,t,n)},m.prototype.bufferWhileBy=function(t,n){return function(t,n,e){return new(t._ofSameType(ke,$e))(t,n,e)}(this,t,n)};var We=!0;function Ue(t){We&&console&&"function"==typeof console.warn&&console.warn(t,"\nHere is an Error object for you containing the call stack:",new Error)}m.prototype.awaiting=function(t){return Ue("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),e=t,Y(Ft(ee([mt(n=this,Oe),mt(e,Ce)])),Ce).setName(n,"awaiting");var n,e},m.prototype.valuesToErrors=function(t){return Ue("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return new(t._ofSameType(xe,Le))(t,{fn:n})}(this,t)},m.prototype.errorsToValues=function(t){return Ue("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:De;return new(t._ofSameType(Me,je))(t,{fn:n})}(this,t)},m.prototype.endOnError=function(){return Ue("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),new((t=this)._ofSameType(Ne,Be))(t);var t};var Fe={Observable:m,Stream:p,Property:y,never:g,later:A,interval:S,sequentially:k,fromPoll:C,withInterval:x,fromCallback:H,fromNodeCallback:M,fromEvents:K,stream:P,constant:B,constantError:W,fromPromise:J,fromESObservable:rt,combine:ht,zip:Xn,merge:ee,concat:se,Pool:oe,pool:qe,repeat:re,staticLand:ft};Fe.Kefir=Fe,t.dissableDeprecationWarnings=function(){We=!1},t.Kefir=Fe,t.Observable=m,t.Stream=p,t.Property=y,t.never=g,t.later=A,t.interval=S,t.sequentially=k,t.fromPoll=C,t.withInterval=x,t.fromCallback=H,t.fromNodeCallback=M,t.fromEvents=K,t.stream=P,t.constant=B,t.constantError=W,t.fromPromise=J,t.fromESObservable=rt,t.combine=ht,t.zip=Xn,t.merge=ee,t.concat=se,t.Pool=oe,t.pool=qe,t.repeat=re,t.staticLand=ft,t.default=Fe,Object.defineProperty(t,"__esModule",{value:!0})}(n)});unwrapExports(kefir);var canKefir,Kefir=kefir,metaSymbol=canSymbol.for("can.meta"),onKeyValueSymbol=canSymbol.for("can.onKeyValue"),offKeyValueSymbol=canSymbol.for("can.offKeyValue"),keyNames={value:{on:"onValue",off:"offValue",handler:"onValueHandler",handlers:"onValueHandlers"},error:{on:"onError",off:"offError",handler:"onErrorHandler",handlers:"onErrorHandlers"}};function ensureMeta(t){var n=t[metaSymbol];return n||(n={},canReflect.setKeyValue(t,metaSymbol,n)),n}function getCurrentValue(t,n){if(t._currentEvent&&t._currentEvent.type===n)return t._currentEvent.value;var e=keyNames[n];if(!e)return t[n];var i,r=function(t){i=t};return t[e.on](r),t[e.off](r),i}Kefir&&(Object.isExtensible&&!Object.isExtensible(Kefir)&&(Kefir=Kefir.Kefir),Kefir.Observable.prototype._eventSetup=function(){var t=this,n=ensureMeta(t);n.bound=!0,n.onValueHandler=function(e){var i=n.value;n.value=e,e!==i&&mapEventBindings.dispatch.call(t,{type:"value"},[e,i])},n.onErrorHandler=function(e){var i=n.error;n.error=e,mapEventBindings.dispatch.call(t,{type:"error"},[e,i])},t.onValue(n.onValueHandler),t.onError(n.onErrorHandler)},Kefir.Observable.prototype._eventTeardown=function(){var t=ensureMeta(this);t.bound=!1,this.offValue(t.onValueHandler),this.offError(t.onErrorHandler)},canReflect.assignSymbols(Kefir.Observable.prototype,{"can.onKeyValue":function(){return mapEventBindings[onKeyValueSymbol].apply(this,arguments)},"can.offKeyValue":function(){return mapEventBindings[offKeyValueSymbol].apply(this,arguments)},"can.getKeyValue":function(t){var n=ensureMeta(this);if(!keyNames[t])return this[t];if(ObservationRecorder.add(this,t),n.bound)return n[t];var e=getCurrentValue(this,t);return n[t]=e,e},"can.getValueDependencies":function(){var t;if(null!=this._source?t=[this._source]:null!=this._sources&&(t=this._sources),null!=t)return{valueDependencies:new Set(t)}}}),Kefir.emitterProperty=function(){var t,n,e=!1,i=Kefir.stream(function(i){return t=i,e&&t.value(n),function(){t=void 0}}).toProperty(function(){return n});return i.emitter={value:function(i){if(t)return t.emit(i);e=!0,n=i},error:function(n){if(t)return t.error(n)}},i.emitter.emit=i.emitter.value,canReflect.assignSymbols(i,{"can.setKeyValue":function(t,n){this.emitter[t](n)}}),i});export{Kefir as a,Kefir as b};
//# sourceMappingURL=chunk-ab664507.js.map
