{"version":3,"file":"chunk-0d15ce09.js","sources":["../node_modules/can-route-hash/can-route-hash.js"],"sourcesContent":["// Regular expression for identifying &amp;key=value lists.\nvar paramsMatcher = /^(?:&[^=]+=[^&]*)+/;\n\nvar LOCATION = require('can-globals/location/location');\nvar canReflect = require(\"can-reflect\");\n\nvar ObservationRecorder = require(\"can-observation-recorder\");\nvar queues = require(\"can-queues\");\nvar KeyTree = require(\"can-key-tree\");\nvar SimpleObservable = require(\"can-simple-observable\");\n\nvar domEvents = require(\"can-dom-events\");\n\nfunction getHash(){\n    var loc = LOCATION();\n    return loc.href.split(/#!?/)[1] || \"\";\n}\n\nfunction HashchangeObservable() {\n    var dispatchHandlers =  this.dispatchHandlers.bind(this);\n    var self = this;\n\t\tthis._value = \"\";\n    this.handlers = new KeyTree([Object,Array],{\n        onFirst: function(){\n            self._value = getHash();\n            domEvents.addEventListener(window, 'hashchange', dispatchHandlers);\n        },\n        onEmpty: function(){\n            domEvents.removeEventListener(window, 'hashchange', dispatchHandlers);\n        }\n    });\n}\nHashchangeObservable.prototype = Object.create(SimpleObservable.prototype);\nHashchangeObservable.constructor = HashchangeObservable;\ncanReflect.assign(HashchangeObservable.prototype,{\n    // STUFF NEEDED FOR can-route integration\n    paramsMatcher: paramsMatcher,\n    querySeparator: \"&\",\n    // don't greedily match slashes in routing rules\n    matchSlashes: false,\n    root: \"#!\",\n    dispatchHandlers: function() {\n        var old = this._value;\n        this._value = getHash();\n        if(old !== this._value) {\n            queues.enqueueByQueue(this.handlers.getNode([]), this, [this._value, old]\n                //!steal-remove-start\n                /* jshint laxcomma: true */\n                , null\n                , [ canReflect.getName(this), \"changed to\", this._value, \"from\", old ]\n                /* jshint laxcomma: false */\n                //!steal-remove-end\n            );\n        }\n    },\n    get: function(){\n        ObservationRecorder.add(this);\n        return getHash();\n    },\n    set: function(path){\n        var loc = LOCATION();\n        if(!path && !loc.hash) {\n\n        } else if(loc.hash !== \"#\" + path) {\n            loc.hash = \"!\" + path;\n        }\n        return path;\n    }\n});\n\nObject.defineProperty(HashchangeObservable.prototype, \"value\", {\n\tget: function(){\n\t\treturn canReflect.getValue(this);\n\t},\n\tset: function(value){\n\t\tcanReflect.setValue(this, value);\n\t}\n});\n\ncanReflect.assignSymbols(HashchangeObservable.prototype,{\n\t\"can.getValue\": HashchangeObservable.prototype.get,\n\t\"can.setValue\": HashchangeObservable.prototype.set,\n\t\"can.onValue\": HashchangeObservable.prototype.on,\n\t\"can.offValue\": HashchangeObservable.prototype.off,\n\t\"can.isMapLike\": false,\n\t\"can.valueHasDependencies\": function(){\n\t\treturn true;\n\t},\n\t//!steal-remove-start\n\t\"can.getName\": function() {\n\t\treturn \"HashchangeObservable<\" + this._value + \">\";\n\t},\n\t//!steal-remove-end\n});\n\nmodule.exports = HashchangeObservable;\n"],"names":["paramsMatcher","getHash","LOCATION","href","split","HashchangeObservable","dispatchHandlers","this","bind","self","_value","handlers","KeyTree","Object","Array","onFirst","domEvents","addEventListener","window","onEmpty","removeEventListener","prototype","create","SimpleObservable","constructor","canReflect","assign","querySeparator","matchSlashes","root","old","queues","enqueueByQueue","getNode","getName","get","ObservationRecorder","add","set","path","loc","hash","defineProperty","getValue","value","setValue","assignSymbols","can.getValue","can.setValue","can.onValue","on","can.offValue","off","can.isMapLike","can.valueHasDependencies","can.getName"],"mappings":"ogBACA,iBAAIA,cAAgB,qBAYpB,SAASC,UAEL,OADUC,WACCC,KAAKC,MAAM,OAAO,IAAM,GAGvC,SAASC,uBACL,IAAIC,EAAoBC,KAAKD,iBAAiBE,KAAKD,MAC/CE,EAAOF,KACbA,KAAKG,OAAS,GACZH,KAAKI,SAAW,IAAIC,QAAQ,CAACC,OAAOC,OAAO,CACvCC,QAAS,WACLN,EAAKC,OAAST,UACde,UAAUC,iBAAiBC,OAAQ,aAAcZ,IAErDa,QAAS,WACLH,UAAUI,oBAAoBF,OAAQ,aAAcZ,MAIhED,qBAAqBgB,UAAYR,OAAOS,OAAOC,iBAAiBF,WAChEhB,qBAAqBmB,YAAcnB,qBACnCoB,WAAWC,OAAOrB,qBAAqBgB,UAAU,CAE7CrB,cAAeA,cACf2B,eAAgB,IAEhBC,cAAc,EACdC,KAAM,KACNvB,iBAAkB,WACd,IAAIwB,EAAMvB,KAAKG,OACfH,KAAKG,OAAST,UACX6B,IAAQvB,KAAKG,QACZqB,OAAOC,eAAezB,KAAKI,SAASsB,QAAQ,IAAK1B,KAAM,CAACA,KAAKG,OAAQoB,GAG/D,KACA,CAAEL,WAAWS,QAAQ3B,MAAO,aAAcA,KAAKG,OAAQ,OAAQoB,KAM7EK,IAAK,WAED,OADAC,oBAAoBC,IAAI9B,MACjBN,WAEXqC,IAAK,SAASC,GACV,IAAIC,EAAMtC,WAMV,OALIqC,GAASC,EAAIC,OAEPD,EAAIC,OAAS,IAAMF,IACzBC,EAAIC,KAAO,IAAMF,GAEdA,KAIf1B,OAAO6B,eAAerC,qBAAqBgB,UAAW,QAAS,CAC9Dc,IAAK,WACJ,OAAOV,WAAWkB,SAASpC,OAE5B+B,IAAK,SAASM,GACbnB,WAAWoB,SAAStC,KAAMqC,MAI5BnB,WAAWqB,cAAczC,qBAAqBgB,UAAU,CACvD0B,eAAgB1C,qBAAqBgB,UAAUc,IAC/Ca,eAAgB3C,qBAAqBgB,UAAUiB,IAC/CW,cAAe5C,qBAAqBgB,UAAU6B,GAC9CC,eAAgB9C,qBAAqBgB,UAAU+B,IAC/CC,iBAAiB,EACjBC,2BAA4B,WAC3B,OAAO,GAGRC,cAAe,WACd,MAAO,wBAA0BhD,KAAKG,OAAS,cAKhCL,0BAAAA"}