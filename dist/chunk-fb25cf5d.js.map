{"version":3,"file":"chunk-fb25cf5d.js","sources":["../node_modules/can-event-dom-radiochange/can-event-dom-radiochange.js"],"sourcesContent":["'use strict';\n\nvar getDocument = require('can-globals/document/document');\nvar namespace = require('can-namespace');\n\nfunction getRoot () {\n\treturn getDocument().documentElement;\n}\n\nfunction findParentForm (el) {\n\twhile (el) {\n\t\tif (el.nodeName === 'FORM') {\n\t\t\tbreak;\n\t\t}\n\t\tel = el.parentNode;\n\t}\n\treturn el;\n}\n\nfunction shouldReceiveEventFromRadio (source, dest) {\n\t// Must have the same name attribute and parent form\n\tvar name = source.getAttribute('name');\n\treturn (\n\t\tname &&\n\t\tname === dest.getAttribute('name') &&\n\t\tfindParentForm(source) === findParentForm(dest)\n\t);\n}\n\nfunction isRadioInput (el) {\n\treturn el.nodeName === 'INPUT' && el.type === 'radio';\n}\n\n\nfunction attachRootListener (domEvents, eventTypeTargets) {\n\tvar root = getRoot();\n\tvar newListener = function (event) {\n\t\tvar target = event.target;\n\t\tif (!isRadioInput(target)) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var eventType in eventTypeTargets) {\n\t\t\tvar newEvent = {type: eventType};\n\t\t\tvar listeningNodes = eventTypeTargets[eventType];\n\t\t\tlisteningNodes.forEach(function (el) {\n\t\t\t\tif (shouldReceiveEventFromRadio(target, el)) {\n\t\t\t\t\tdomEvents.dispatch(el, newEvent, false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\tdomEvents.addEventListener(root, 'change', newListener);\n\treturn newListener;\n}\n\nfunction detachRootListener (domEvents, listener) {\n\tvar root = getRoot();\n\tdomEvents.removeEventListener(root, 'change', listener);\n}\n\n/**\n * @module {events} can-event-dom-radiochange\n * @parent can-dom-utilities\n * @collection can-infrastructure\n * @package ./package.json\n *\n * A custom event for listening to changes of inputs with type \"radio\",\n * which fires when a conflicting radio input changes. A \"conflicting\"\n * radio button has the same \"name\" attribute and exists within in the\n * same form, or lack thereof. This event coordinates state bound to\n * whether a radio is checked. The \"change\" event does not fire for deselected\n * radios. By using this event instead, deselected radios receive notification.\n *\n * ```js\n * var domEvents = require('can-dom-events');\n * var radioChange = require('can-event-dom-radiochange');\n * domEvents.addEvent(radioChange);\n *\n * var target = document.createElement('input');\n *\n * function handler () {\n * \tconsole.log('radiochange event fired');\n * }\n *\n * domEvents.addEventListener(target, 'radiochange', handler);\n * domEvents.removeEventListener(target, 'radiochange', handler);\n * ```\n */\nvar radioChangeEvent = {\n\tdefaultEventType: 'radiochange',\n\n\taddEventListener: function (target, eventType, handler) {\n\t\tif (!isRadioInput(target)) {\n\t\t\tthrow new Error('Listeners for ' + eventType + ' must be radio inputs');\n\t\t}\n\n\t\tvar eventTypeTrackedRadios = radioChangeEvent._eventTypeTrackedRadios;\n\t\tif (!eventTypeTrackedRadios) {\n\t\t\teventTypeTrackedRadios = radioChangeEvent._eventTypeTrackedRadios = {};\n\t\t\tif (!radioChangeEvent._rootListener) {\n\t\t\t\tradioChangeEvent._rootListener = attachRootListener(this, eventTypeTrackedRadios);\n\t\t\t}\t\t\t\n\t\t}\n\n\t\tvar trackedRadios = radioChangeEvent._eventTypeTrackedRadios[eventType];\n\t\tif (!trackedRadios) {\n\t\t\ttrackedRadios = radioChangeEvent._eventTypeTrackedRadios[eventType] = new Set();\n\t\t}\n\n\t\ttrackedRadios.add(target);\n\t\ttarget.addEventListener(eventType, handler);\n\t},\n\n\tremoveEventListener: function (target, eventType, handler) {\n\t\ttarget.removeEventListener(eventType, handler);\n\n\t\tvar eventTypeTrackedRadios = radioChangeEvent._eventTypeTrackedRadios;\n\t\tif (!eventTypeTrackedRadios) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar trackedRadios = eventTypeTrackedRadios[eventType];\n\t\tif (!trackedRadios) {\n\t\t\treturn;\n\t\t}\n\t\n\t\ttrackedRadios.delete(target);\n\t\tif (trackedRadios.size === 0) {\n\t\t\tdelete eventTypeTrackedRadios[eventType];\n\t\t\tfor (var key in eventTypeTrackedRadios) {\n\t\t\t\tif (eventTypeTrackedRadios.hasOwnProperty(key)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\t\t\t\t\t\t\n\t\t\t}\n\t\t\tdelete radioChangeEvent._eventTypeTrackedRadios;\n\t\t\tdetachRootListener(this, radioChangeEvent._rootListener);\n\t\t\tdelete radioChangeEvent._rootListener;\n\t\t}\n\t}\n};\n\nmodule.exports = namespace.domEventRadioChange = radioChangeEvent;\n"],"names":["getRoot","getDocument","documentElement","findParentForm","el","nodeName","parentNode","shouldReceiveEventFromRadio","source","dest","name","getAttribute","isRadioInput","type","attachRootListener","domEvents","eventTypeTargets","root","newListener","event","target","eventType","newEvent","forEach","dispatch","addEventListener","detachRootListener","listener","removeEventListener","radioChangeEvent","defaultEventType","handler","Error","eventTypeTrackedRadios","_eventTypeTrackedRadios","_rootListener","this","trackedRadios","Set","add","delete","size","key","hasOwnProperty","namespace","domEventRadioChange"],"mappings":"8HAKA,SAASA,UACR,OAAOC,cAAcC,gBAGtB,SAASC,eAAgBC,GACxB,KAAOA,GACc,SAAhBA,EAAGC,UAGPD,EAAKA,EAAGE,WAET,OAAOF,EAGR,SAASG,4BAA6BC,EAAQC,GAE7C,IAAIC,EAAOF,EAAOG,aAAa,QAC/B,OACCD,GACAA,IAASD,EAAKE,aAAa,SAC3BR,eAAeK,KAAYL,eAAeM,GAI5C,SAASG,aAAcR,GACtB,MAAuB,UAAhBA,EAAGC,UAAoC,UAAZD,EAAGS,KAItC,SAASC,mBAAoBC,EAAWC,GACvC,IAAIC,EAAOjB,UACPkB,EAAc,SAAUC,GAC3B,IAAIC,EAASD,EAAMC,OACnB,GAAKR,aAAaQ,GAIlB,IAAK,IAAIC,KAAaL,EAAkB,CACvC,IAAIM,EAAW,CAACT,KAAMQ,GACDL,EAAiBK,GACvBE,QAAQ,SAAUnB,GAC5BG,4BAA4Ba,EAAQhB,IACvCW,EAAUS,SAASpB,EAAIkB,GAAU,OAMrC,OADAP,EAAUU,iBAAiBR,EAAM,SAAUC,GACpCA,EAGR,SAASQ,mBAAoBX,EAAWY,GACvC,IAAIV,EAAOjB,UACXe,EAAUa,oBAAoBX,EAAM,SAAUU,GA+B/C,IAAIE,iBAAmB,CACtBC,iBAAkB,cAElBL,iBAAkB,SAAUL,EAAQC,EAAWU,GAC9C,IAAKnB,aAAaQ,GACjB,MAAM,IAAIY,MAAM,iBAAmBX,EAAY,yBAGhD,IAAIY,EAAyBJ,iBAAiBK,wBACzCD,IACJA,EAAyBJ,iBAAiBK,wBAA0B,GAC/DL,iBAAiBM,gBACrBN,iBAAiBM,cAAgBrB,mBAAmBsB,KAAMH,KAI5D,IAAII,EAAgBR,iBAAiBK,wBAAwBb,GACxDgB,IACJA,EAAgBR,iBAAiBK,wBAAwBb,GAAa,IAAIiB,KAG3ED,EAAcE,IAAInB,GAClBA,EAAOK,iBAAiBJ,EAAWU,IAGpCH,oBAAqB,SAAUR,EAAQC,EAAWU,GACjDX,EAAOQ,oBAAoBP,EAAWU,GAEtC,IAAIE,EAAyBJ,iBAAiBK,wBAC9C,GAAKD,EAAL,CAIA,IAAII,EAAgBJ,EAAuBZ,GAC3C,GAAKgB,IAILA,EAAcG,OAAOpB,GACM,IAAvBiB,EAAcI,MAAY,CAE7B,IAAK,IAAIC,YADFT,EAAuBZ,GACdY,EACf,GAAIA,EAAuBU,eAAeD,GACzC,cAGKb,iBAAiBK,wBACxBR,mBAAmBU,KAAMP,iBAAiBM,sBACnCN,iBAAiBM,yCAKVS,UAAUC,oBAAsBhB"}