import{a as LOCATION}from"./chunk-932cc7dc.mjs";import"./chunk-5f1245ff.mjs";import"./chunk-fa6b878a.mjs";import"./chunk-862b179d.mjs";import"./chunk-2c9f11a8.mjs";import"./chunk-660b4975.mjs";import"./chunk-037c51df.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";import{a as ObservationRecorder}from"./chunk-8811d387.mjs";import{a as queues}from"./chunk-12ed728f.mjs";import{a as KeyTree}from"./chunk-8d049599.mjs";import{a as SimpleObservable}from"./chunk-65b62c71.mjs";import{a as domEvents}from"./chunk-cb75b84f.mjs";var canRouteHash,paramsMatcher=/^(?:&[^=]+=[^&]*)+/;function getHash(){return LOCATION().href.split(/#!?/)[1]||""}function HashchangeObservable(){var e=this.dispatchHandlers.bind(this),a=this;this._value="",this.handlers=new KeyTree([Object,Array],{onFirst:function(){a._value=getHash(),domEvents.addEventListener(window,"hashchange",e)},onEmpty:function(){domEvents.removeEventListener(window,"hashchange",e)}})}HashchangeObservable.prototype=Object.create(SimpleObservable.prototype),HashchangeObservable.constructor=HashchangeObservable,canReflect.assign(HashchangeObservable.prototype,{paramsMatcher:paramsMatcher,querySeparator:"&",matchSlashes:!1,root:"#!",dispatchHandlers:function(){var e=this._value;this._value=getHash(),e!==this._value&&queues.enqueueByQueue(this.handlers.getNode([]),this,[this._value,e],null,[canReflect.getName(this),"changed to",this._value,"from",e])},get:function(){return ObservationRecorder.add(this),getHash()},set:function(e){var a=LOCATION();return(e||a.hash)&&a.hash!=="#"+e&&(a.hash="!"+e),e}}),Object.defineProperty(HashchangeObservable.prototype,"value",{get:function(){return canReflect.getValue(this)},set:function(e){canReflect.setValue(this,e)}}),canReflect.assignSymbols(HashchangeObservable.prototype,{"can.getValue":HashchangeObservable.prototype.get,"can.setValue":HashchangeObservable.prototype.set,"can.onValue":HashchangeObservable.prototype.on,"can.offValue":HashchangeObservable.prototype.off,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0},"can.getName":function(){return"HashchangeObservable<"+this._value+">"}});export{HashchangeObservable as a,HashchangeObservable as b};
//# sourceMappingURL=chunk-0d15ce09.js.map
