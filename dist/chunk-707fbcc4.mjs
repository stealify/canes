import{a as maybeBoolean,b as maybeDate,c as maybeNumber,d as maybeString}from"./chunk-8a3a072d.mjs";import{a as process$1}from"./chunk-bacf0c54.mjs";import"./chunk-805ffcb4.mjs";import{a as canSymbol}from"./chunk-b37d91a1.mjs";import"./chunk-5f1245ff.mjs";import"./chunk-7dfeb1df.mjs";import"./chunk-fa6b878a.mjs";import{a as AsyncObservable,b as ResolverObservable}from"./chunk-8f9d5c6d.mjs";import{a as SettableObservable}from"./chunk-576d20b1.mjs";import"./chunk-f8a6947c.mjs";import{a as addTypeEvents}from"./chunk-b2e1c1d8.mjs";import"./chunk-862b179d.mjs";import"./chunk-bd824939.mjs";import{a as dev}from"./chunk-585d4076.mjs";import"./chunk-541940e7.mjs";import"./chunk-b1806013.mjs";import{a as namespace}from"./chunk-3b4c7b38.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";import{a as Observation}from"./chunk-c1d5d21e.mjs";import{a as ObservationRecorder}from"./chunk-8811d387.mjs";import{a as mapEventBindings}from"./chunk-910f3205.mjs";import{a as queues}from"./chunk-12ed728f.mjs";import{a as assign}from"./chunk-75bea8d8.mjs";import{a as stringToAny}from"./chunk-321b6aa1.mjs";import{a as defineLazyValue}from"./chunk-d2889630.mjs";var eventsProto,define,make,makeDefinition,getDefinitionsAndMethods,getDefinitionOrMethod,newSymbol=canSymbol.for("can.new"),serializeSymbol=canSymbol.for("can.serialize");function isDefineType(e){return e&&(!0===e.canDefineType||e[newSymbol])}var peek=ObservationRecorder.ignore(canReflect.getValue.bind(canReflect)),Object_defineNamedPrototypeProperty=Object.defineProperty;function defineConfigurableAndNotEnumerable(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}function eachPropertyDescriptor(e,t){for(var n in e)e.hasOwnProperty(n)&&t.call(e,n,Object.getOwnPropertyDescriptor(e,n))}function getEveryPropertyAndSymbol(e){var t=Object.getOwnPropertyNames(e),n="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(e):[];return t.concat(n)}function cleanUpDefinition(e,t,n,i){void 0===t.value||"function"==typeof t.value&&0!==t.value.length||("production"!==process$1.env.NODE_ENV&&n&&dev.warn("can-define: Change the 'value' definition for "+canReflect.getName(i)+"."+e+" to 'default'."),t.default=t.value,delete t.value),void 0!==t.Value&&("production"!==process$1.env.NODE_ENV&&n&&dev.warn("can-define: Change the 'Value' definition for "+canReflect.getName(i)+"."+e+" to 'Default'."),t.Default=t.Value,delete t.Value)}function isValueResolver(e){return"function"==typeof e.value&&e.value.length}"production"!==process$1.env.NODE_ENV&&(Object_defineNamedPrototypeProperty=function(e,t,n){return n.get&&Object.defineProperty(n.get,"name",{value:"get "+canReflect.getName(e)+"."+t,writable:!0,configurable:!0}),n.set&&Object.defineProperty(n.set,"name",{value:"set "+canReflect.getName(e)+"."+t,configurable:!0}),Object.defineProperty(e,t,n)});var canDefine=define=namespace.define=function(e,t,n){var i,a=Object.create(n?n.dataInitializers:null),r=Object.create(n?n.computedInitializers:null),o=getDefinitionsAndMethods(t,n,e);if(o.dataInitializers=a,o.computedInitializers=r,canReflect.eachKey(o.definitions,function(t,n){define.property(e,n,t,a,r,o.defaultDefinition)}),e.hasOwnProperty("_data"))for(i in a)defineLazyValue(e._data,i,a[i].bind(e),!0);else defineLazyValue(e,"_data",function(){var e={};for(var t in a)defineLazyValue(e,t,a[t].bind(this),!0);return e});if(e.hasOwnProperty("_computed"))for(i in r)defineLazyValue(e._computed,i,r[i].bind(e));else defineLazyValue(e,"_computed",function(){var e=Object.create(null);for(var t in r)defineLazyValue(e,t,r[t].bind(this));return e});getEveryPropertyAndSymbol(eventsProto).forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,value:eventsProto[t],configurable:!0,writable:!0})}),Object.defineProperty(e,"_define",{enumerable:!1,value:o,configurable:!0,writable:!0});var s=canSymbol.iterator||canSymbol.for("iterator");return e[s]||defineConfigurableAndNotEnumerable(e,s,function(){return new define.Iterator(this)}),o},onlyType=function(e){for(var t in e)if("type"!==t)return!1;return!0};define.extensions=function(){},define.property=function(e,t,n,i,a,r){var o=define.extensions.apply(this,arguments);o&&(n=makeDefinition(t,o,r||{},e));var s=n.type;if("production"!==process$1.env.NODE_ENV&&s&&canReflect.isConstructorLike(s)&&!isDefineType(s)&&dev.warn("can-define: the definition for "+canReflect.getName(e)+"."+t+' uses a constructor for "type". Did you mean "Type"?'),s&&onlyType(n)&&s===define.types["*"])Object_defineNamedPrototypeProperty(e,t,{get:make.get.data(t),set:make.set.events(t,make.get.data(t),make.set.data(t),make.eventType.data(t)),enumerable:!0,configurable:!0});else{n.type=s;var c,u=n.get||isValueResolver(n)?"computed":"data",f=make.read[u](t),l=make.get[u](t),d=make.set[u](t);"production"!==process$1.env.NODE_ENV&&(n.get&&Object.defineProperty(n.get,"name",{value:canReflect.getName(e)+"'s "+t+" getter",configurable:!0}),n.set&&Object.defineProperty(n.set,"name",{value:canReflect.getName(e)+"'s "+t+" setter",configurable:!0}),isValueResolver(n)&&Object.defineProperty(n.value,"name",{value:canReflect.getName(e)+"'s "+t+" value",configurable:!0}));var p=function(e){return e};n.Type&&(p=make.set.Type(t,n.Type,p)),s&&(p=make.set.type(t,s,p));var m=make.set.events(t,f,d,make.eventType[u](t));isValueResolver(n)?a[t]=make.valueResolver(t,n,p):void 0===n.default&&void 0===n.Default||("production"!==process$1.env.NODE_ENV&&(null!==n.default&&"object"==typeof n.default&&dev.warn("can-define: The default value for "+canReflect.getName(e)+"."+t+" is set to an object. This will be shared by all instances of the DefineMap. Use a function that returns the object instead."),n.default&&canReflect.isConstructorLike(n.default)&&dev.warn('can-define: The "default" for '+canReflect.getName(e)+"."+t+' is set to a constructor. Did you mean "Default" instead?')),c=ObservationRecorder.ignore(make.get.defaultValue(t,n,p,m))),n.get?a[t]=make.compute(t,n.get,c):c&&(i[t]=c),n.get&&n.set?d=make.set.setter(t,n.set,make.read.lastSet(t),d,!0):n.set?d=make.set.setter(t,n.set,f,m,!1):"data"===u?d=m:n.get&&n.get.length<1&&(d=function(){"production"!==process$1.env.NODE_ENV&&dev.warn("can-define: Set value for property "+canReflect.getName(e)+"."+t+" ignored, as its definition has a zero-argument getter and no setter")}),s&&(d=make.set.type(t,s,d)),n.Type&&(d=make.set.Type(t,n.Type,d)),Object_defineNamedPrototypeProperty(e,t,{get:l,set:d,enumerable:"serialize"in n?!!n.serialize:!n.get,configurable:!0})}},define.makeDefineInstanceKey=function(e){e[canSymbol.for("can.defineInstanceKey")]=function(t,n){var i=this.prototype._define;"object"==typeof n&&cleanUpDefinition(t,n,!1,this);var a=getDefinitionOrMethod(t,n,i.defaultDefinition,this);a&&"object"==typeof a?(define.property(e.prototype,t,a,i.dataInitializers,i.computedInitializers,i.defaultDefinition),i.definitions[t]=a):i.methods[t]=a,this.prototype.dispatch({type:"can.keys",target:this.prototype})}},define.Constructor=function(e,t){var n=function(e){Object.defineProperty(this,"__inSetup",{configurable:!0,enumerable:!1,value:!0,writable:!0}),define.setup.call(this,e,t),this.__inSetup=!1},i=define(n.prototype,e);return addTypeEvents(n),define.makeDefineInstanceKey(n,i),n},make={computeObj:function(e,t,n){var i={oldValue:void 0,compute:n,count:0,handler:function(n){var a=i.oldValue;i.oldValue=n,e.dispatch({type:t,target:e},[n,a])}};return i},valueResolver:function(e,t,n){var i=make.get.defaultValue(e,t,n);return function(){var n=i.call(this),a=make.computeObj(this,e,new ResolverObservable(t.value,this,n));return"production"!==process$1.env.NODE_ENV&&Object.defineProperty(a.handler,"name",{value:canReflect.getName(t.value).replace("value","event emitter")}),a}},compute:function(e,t,n){return function(){var i,a,r=n&&n.call(this);return i=0===t.length?new Observation(t,this):1===t.length?new SettableObservable(t,this,r):new AsyncObservable(t,this,r),a=make.computeObj(this,e,i),"production"!==process$1.env.NODE_ENV&&Object.defineProperty(a.handler,"name",{value:canReflect.getName(t).replace("getter","event emitter")}),a}},set:{data:function(e){return function(t){this._data[e]=t}},computed:function(e){return function(t){canReflect.setValue(this._computed[e].compute,t)}},events:function(e,t,n,i){return function(i){if(this.__inSetup)n.call(this,i);else{var a,r=t.call(this);if(i!==r)n.call(this,i),a={patches:[{type:"set",key:e,value:i}],type:e,target:this},"production"!==process$1.env.NODE_ENV&&(a.reasonLog=[canReflect.getName(this)+"'s",e,"changed to",i,"from",r]),this.dispatch(a,[i,r])}}},setter:function(e,t,n,i,a){return function(r){var o,s=this;queues.batch.start();var c=!1,u=n.call(this),f=t.call(this,r,function(e){i.call(s,e),c=!0,"production"!==process$1.env.NODE_ENV&&clearTimeout(o)},u);if(c)queues.batch.stop();else if(a)if(void 0!==f)u!==f&&i.call(this,f),queues.batch.stop();else{if(0===t.length)return i.call(this,r),void queues.batch.stop();if(1!==t.length)return"production"!==process$1.env.NODE_ENV&&(o=setTimeout(function(){dev.warn('can-define: Setter "'+canReflect.getName(s)+"."+e+'" did not return a value or call the setter callback.')},dev.warnTimeout)),void queues.batch.stop();queues.batch.stop()}else if(void 0!==f)i.call(this,f),queues.batch.stop();else{if(0===t.length)return i.call(this,r),void queues.batch.stop();if(1!==t.length)return"production"!==process$1.env.NODE_ENV&&(o=setTimeout(function(){dev.warn('can/map/setter.js: Setter "'+canReflect.getName(s)+"."+e+'" did not return a value or call the setter callback.')},dev.warnTimeout)),void queues.batch.stop();i.call(this,void 0),queues.batch.stop()}}},type:function(e,t,n){function i(i){return n.call(this,t.call(this,i,e))}return isDefineType(t)?t.canDefineType?i:function(e){return n.call(this,canReflect.convert(e,t))}:"object"==typeof t?make.set.Type(e,t,n):i},Type:function(e,t,n){return Array.isArray(t)&&define.DefineList?t=define.DefineList.extend({"#":t[0]}):"object"==typeof t&&(t=define.DefineMap?define.DefineMap.extend(t):define.Constructor(t)),function(e){return e instanceof t||null==e?n.call(this,e):n.call(this,new t(e))}}},eventType:{data:function(e){return function(t,n){return void 0!==n||this._data.hasOwnProperty(e)?"set":"add"}},computed:function(){return function(){return"set"}}},read:{data:function(e){return function(){return this._data[e]}},computed:function(e){return function(){return canReflect.getValue(this._computed[e].compute)}},lastSet:function(e){return function(){var t=this._computed[e].compute;if(t.lastSetValue)return canReflect.getValue(t.lastSetValue)}}},get:{defaultValue:function(e,t,n,i){return function(){var a=t.default;if(void 0!==a)"function"==typeof a&&(a=a.call(this)),a=n.call(this,a);else{var r=t.Default;r&&(a=n.call(this,new r))}if(t.set){var o,s=!0;return make.set.setter(e,t.set,function(){},function(e){s?o=e:i.call(this,e)},t.get).call(this,a),s=!1,o}return a}},data:function(e){return function(){return this.__inSetup||ObservationRecorder.add(this,e),this._data[e]}},computed:function(e){return function(t){var n=this._computed[e].compute;return ObservationRecorder.isRecording()&&(ObservationRecorder.add(this,e),canReflect.isBound(n)||Observation.temporarilyBind(n)),peek(n)}}}},define.behaviors=["get","set","value","Value","type","Type","serialize"];var addBehaviorToDefinition=function(e,t,n){if("enumerable"===t)e.serialize=!!n;else if("type"===t){var i=n;"string"==typeof i&&("object"!=typeof(i=define.types[i])||isDefineType(i)||(assign(e,i),i=i[t])),void 0!==i&&(e[t]=i)}else e[t]=n};function setupComputed(e,t){var n=e._computed&&e._computed[t];n&&n.compute&&(n.count?n.count++:(n.count=1,canReflect.onValue(n.compute,n.handler,"notify"),n.oldValue=canReflect.getValue(n.compute)))}function teardownComputed(e,t){var n=e._computed&&e._computed[t];n&&(1===n.count?(n.count=0,canReflect.offValue(n.compute,n.handler,"notify")):n.count--)}makeDefinition=function(e,t,n,i){var a={};if(canReflect.eachKey(t,function(e,t){addBehaviorToDefinition(a,t,e)}),canReflect.eachKey(n,function(e,t){void 0===a[t]&&"type"!==t&&"Type"!==t&&(a[t]=e)}),t.Type){var r=t.Type,o=r[serializeSymbol];o&&(a.serialize=function(e){return o.call(e)}),r[newSymbol]&&(a.type=r[newSymbol],delete a.Type)}if("string"!=typeof t.type){if(!a.type&&!a.Type){var s=canReflect.assignMap({},n);a=canReflect.assignMap(s,a)}0===canReflect.size(a)&&(a.type=define.types["*"])}return cleanUpDefinition(e,a,!0,i),a},getDefinitionOrMethod=function(e,t,n,i){var a;return"string"==typeof t?a={type:t}:t&&(t[serializeSymbol]||t[newSymbol])?a={Type:t}:"function"==typeof t?canReflect.isConstructorLike(t)&&(a={Type:t}):Array.isArray(t)?a={Type:t}:canReflect.isPlainObject(t)&&(a=t),a?makeDefinition(e,a,n,i):t},getDefinitionsAndMethods=function(e,t,n){var i,a=Object.create(t?t.definitions:null),r={},o=e["*"];return o?(delete e["*"],i=getDefinitionOrMethod("*",o,{})):i=Object.create(null),eachPropertyDescriptor(e,function(e,t){var o;if(o=t.get||t.set?{get:t.get,set:t.set}:t.value,"constructor"!==e){var s=getDefinitionOrMethod(e,o,i,n);s&&"object"==typeof s&&canReflect.size(s)>0?a[e]=s:"function"==typeof s?r[e]=s:void 0!==s&&"production"!==process$1.env.NODE_ENV&&dev.error(canReflect.getName(n)+"."+e+" does not match a supported propDefinition. See: https://canjs.com/doc/can-define.types.propDefinition.html")}else r[e]=o}),o&&defineConfigurableAndNotEnumerable(e,"*",o),{definitions:a,methods:r,defaultDefinition:i}},eventsProto=mapEventBindings({});var canMetaSymbol=canSymbol.for("can.meta");assign(eventsProto,{_eventSetup:function(){},_eventTeardown:function(){},addEventListener:function(e,t,n){return setupComputed(this,e),mapEventBindings.addEventListener.apply(this,arguments)},removeEventListener:function(e,t){return teardownComputed(this,e),mapEventBindings.removeEventListener.apply(this,arguments)}}),eventsProto.on=eventsProto.bind=eventsProto.addEventListener,eventsProto.off=eventsProto.unbind=eventsProto.removeEventListener;var onKeyValueSymbol=canSymbol.for("can.onKeyValue"),offKeyValueSymbol=canSymbol.for("can.offKeyValue");canReflect.assignSymbols(eventsProto,{"can.onKeyValue":function(e){return setupComputed(this,e),mapEventBindings[onKeyValueSymbol].apply(this,arguments)},"can.offKeyValue":function(e){return teardownComputed(this,e),mapEventBindings[offKeyValueSymbol].apply(this,arguments)}}),delete eventsProto.one,define.setup=function(e,t){Object.defineProperty(this,"constructor",{value:this.constructor,enumerable:!1,writable:!1}),Object.defineProperty(this,canMetaSymbol,{value:Object.create(null),enumerable:!1,writable:!1});var n=this._define.definitions,i=Object.create(null),a=this;canReflect.eachKey(e,function(e,t){void 0!==n[t]?a[t]=e:define.expando(a,t,e)}),canReflect.size(i)>0&&defineConfigurableAndNotEnumerable(this,"_instanceDefinitions",i),"production"!==process$1.env.NODE_ENV&&(this._data,this._computed,!1!==t&&Object.seal(this))};var returnFirstArg=function(e){return e};define.expando=function(e,t,n){if(define._specialKeys[t])return!0;var i=e._define.definitions;if(!i||!i[t]){var a=e._instanceDefinitions;if(!a){if(Object.isSealed(e))return;Object.defineProperty(e,"_instanceDefinitions",{configurable:!0,enumerable:!1,writable:!0,value:{}}),a=e._instanceDefinitions}if(!a[t]){var r=e._define.defaultDefinition||{type:define.types.observable};return define.property(e,t,r,{},{}),r.type?e._data[t]=define.make.set.type(t,r.type,returnFirstArg).call(e,n):e._data[t]=define.types.observable(n),a[t]=r,e.__inSetup||(queues.batch.start(),e.dispatch({type:"can.keys",target:e}),void 0!==e._data[t]&&e.dispatch({type:t,target:e,patches:[{type:"set",key:t,value:e._data[t]}]},[e._data[t],void 0]),queues.batch.stop()),!0}}},define.replaceWith=defineLazyValue,define.eventsProto=eventsProto,define.defineConfigurableAndNotEnumerable=defineConfigurableAndNotEnumerable,define.make=make,define.getDefinitionOrMethod=getDefinitionOrMethod,define._specialKeys={_data:!0,_computed:!0};var simpleGetterSetters={};function isObservableValue(e){return canReflect.isValueLike(e)&&canReflect.isObservableLike(e)}define.makeSimpleGetterSetter=function(e){if(void 0===simpleGetterSetters[e]){var t=make.set.events(e,make.get.data(e),make.set.data(e),make.eventType.data(e));simpleGetterSetters[e]={get:make.get.data(e),set:function(e){return t.call(this,define.types.observable(e))},enumerable:!0,configurable:!0}}return simpleGetterSetters[e]},define.Iterator=function(e){this.obj=e,this.definitions=Object.keys(e._define.definitions),this.instanceDefinitions=e._instanceDefinitions?Object.keys(e._instanceDefinitions):Object.keys(e),this.hasGet="function"==typeof e.get},define.Iterator.prototype.next=function(){var e;if(this.definitions.length){if(e=this.definitions.shift(),this.obj._define.definitions[e].get)return this.next()}else{if(!this.instanceDefinitions.length)return{value:void 0,done:!0};e=this.instanceDefinitions.shift()}return{value:[e,this.hasGet?this.obj.get(e):this.obj[e]],done:!1}},define.types={date:maybeDate,number:maybeNumber,boolean:maybeBoolean,observable:function(e){return Array.isArray(e)&&define.DefineList?e=new define.DefineList(e):canReflect.isPlainObject(e)&&define.DefineMap&&(e=new define.DefineMap(e)),e},stringOrObservable:function(e){return Array.isArray(e)?new define.DefaultList(e):canReflect.isPlainObject(e)?new define.DefaultMap(e):canReflect.convert(e,define.types.string)},htmlbool:function(e){return""===e||!!stringToAny(e)},"*":function(e){return e},any:function(e){return e},string:maybeString,compute:{set:function(e,t,n,i){return isObservableValue(e)?e:isObservableValue(i)?(canReflect.setValue(i,e),i):e},get:function(e){return isObservableValue(e)?canReflect.getValue(e):e}}},define.updateSchemaKeys=function(e,t){for(var n in t){var i=t[n];!1!==i.serialize&&(i.type?e.keys[n]=i.type:e.keys[n]=function(e){return e},!0===t[n].identity&&e.identity.push(n))}return e};export{canDefine as a,canDefine as b};
//# sourceMappingURL=chunk-707fbcc4.js.map
