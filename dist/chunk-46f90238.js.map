{"version":3,"file":"chunk-46f90238.js","sources":["../node_modules/can-key/walk/walk.js","../node_modules/can-key/transform/transform.js"],"sourcesContent":["\"use strict\";\nvar canReflect = require(\"can-reflect\");\nvar utils = require(\"../utils\");\n\n\n/**\n * @module {function} can-key/walk/walk\n * @parent can-key\n *\n * @signature `walk(obj, name, keyCallback(info) )`\n *\n * ```js\n * import walk from \"can-key/walk/walk\";\n *\n * var user = {name: {first: \"Justin\"}}\n * walk(user, \"name.first\", (keyInfo)=> {\n *   // Called 2 times.\n *   // first call:\n *   keyInfo //-> {parent: user, key: \"name\", value: user.name}\n *   // second call:\n *   keyInfo //-> {parent: user.name, key: \"first\", value: user.name.first}\n * })\n * ```\n *\n * @param {Object} obj An object to read key values from.\n * @param {String} name A string key name like \"foo.bar\".\n * @param {function(Object)} keyCallback(info) For every key value,\n * `keyCallback` will be called back with an `info` object containing:\n *\n * - `info.parent` - The object the property value is being read from.\n * - `info.key` - The key being read.\n * - `info.value` - The key's value.\n *\n * If `keyCallback` returns a value other than `undefined`, the next key value\n * will be read from that value.\n */\nmodule.exports = function walk(obj, name, keyCallback){\n\n    // The parts of the name we are looking up\n    // `['App','Models','Recipe']`\n    var parts = utils.parts(name);\n\n    var length = parts.length,\n        current, i, container, part;\n\n\n    if (!length) {\n        return;\n    }\n\n    current = obj;\n\n    // Walk current to the 2nd to last object or until there\n    // is not a container.\n    for (i = 0; i < length; i++) {\n        container = current;\n        part = parts[i];\n        current = utils.isContainer(container) && canReflect.getKeyValue( container, part );\n\n        var result = keyCallback({\n            parent:container,\n            key: part,\n            value: current\n        }, i);\n        if(result !== undefined) {\n            current = result;\n        }\n    }\n};\n","\"use strict\";\nvar walk = require(\"../walk/walk\");\nvar utils = require(\"../utils\");\nvar canReflect = require(\"can-reflect\");\n\nfunction deleteKeys(parentsAndKeys) {\n    for(var i  = parentsAndKeys.length - 1; i >= 0; i--) {\n        var parentAndKey = parentsAndKeys[i];\n        delete  parentAndKey.parent[parentAndKey.key];\n        if(canReflect.size(parentAndKey.parent) !== 0) {\n            return;\n        }\n    }\n}\n/**\n * @module {function} can-key/transform/transform\n * @parent can-key\n */\nmodule.exports = function(obj, transformer){\n    var copy = canReflect.serialize( obj);\n\n    canReflect.eachKey(transformer, function(writeKey, readKey){\n        var readParts = utils.parts(readKey),\n            writeParts = utils.parts(writeKey);\n\n        // find the value\n        var parentsAndKeys = [];\n        walk(copy, readParts, function(info){\n            parentsAndKeys.push(info);\n        });\n        var last = parentsAndKeys[parentsAndKeys.length - 1];\n        var value = last.value;\n        if(value !== undefined) {\n            // write the value\n            walk(copy, writeParts, function(info, i){\n                if(i < writeParts.length - 1 && !info.value) {\n                    return info.parent[info.key] = {};\n                } else if(i === writeParts.length - 1){\n                    info.parent[info.key] = value;\n                }\n            });\n            // delete the keys on old\n            deleteKeys(parentsAndKeys);\n\n        }\n    });\n    return copy;\n};\n"],"names":["obj","name","keyCallback","current","i","container","part","parts","utils","length","result","parent","key","value","isContainer","canReflect","getKeyValue","undefined","deleteKeys","parentsAndKeys","parentAndKey","size","transformer","copy","serialize","eachKey","writeKey","readKey","readParts","writeParts","walk","info","push"],"mappings":"+HAoCA,SAAiB,SAAcA,EAAKC,EAAMC,GAItC,IAGIC,EAASC,EAAGC,EAAWC,EAHvBC,EAAQC,YAAMD,MAAMN,GAEpBQ,EAASF,EAAME,OAInB,GAAKA,EAQL,IAJAN,EAAUH,EAILI,EAAI,EAAGA,EAAIK,EAAQL,IAAK,CAKzB,IAAIM,EAASR,EAAY,CACrBS,OALJN,EAAYF,EAMRS,IALJN,EAAOC,EAAMH,GAMTS,MALJV,EAAUK,YAAMM,YAAYT,IAAcU,WAAWC,YAAaX,EAAWC,IAM1EF,QACWa,IAAXP,IACCP,EAAUO,KC5DtB,SAASQ,WAAWC,GAChB,IAAI,IAAIf,EAAKe,EAAeV,OAAS,EAAGL,GAAK,EAAGA,IAAK,CACjD,IAAIgB,EAAeD,EAAef,GAElC,UADQgB,EAAaT,OAAOS,EAAaR,KACG,IAAzCG,WAAWM,KAAKD,EAAaT,QAC5B,QAQZ,cAAiB,SAASX,EAAKsB,GAC3B,IAAIC,EAAOR,WAAWS,UAAWxB,GA2BjC,OAzBAe,WAAWU,QAAQH,EAAa,SAASI,EAAUC,GAC/C,IAAIC,EAAYpB,YAAMD,MAAMoB,GACxBE,EAAarB,YAAMD,MAAMmB,GAGzBP,EAAiB,GACrBW,KAAKP,EAAMK,EAAW,SAASG,GAC3BZ,EAAea,KAAKD,KAExB,IACIlB,EADOM,EAAeA,EAAeV,OAAS,GACjCI,WACJI,IAAVJ,IAECiB,KAAKP,EAAMM,EAAY,SAASE,EAAM3B,GAClC,GAAGA,EAAIyB,EAAWpB,OAAS,IAAMsB,EAAKlB,MAClC,OAAOkB,EAAKpB,OAAOoB,EAAKnB,KAAO,GACzBR,IAAMyB,EAAWpB,OAAS,IAChCsB,EAAKpB,OAAOoB,EAAKnB,KAAOC,KAIhCK,WAAWC,MAIZI"}