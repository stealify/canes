import"./chunk-805ffcb4.mjs";import{a as namespace}from"./chunk-3b4c7b38.mjs";var ndjsonStream=function(e){var r,n=!1;return new ReadableStream({start:function(a){var t=e.getReader();r=t;var c=new TextDecoder,o="";t.read().then(function e(r){if(!r.done){for(var s=c.decode(r.value,{stream:!0}),d=(o+=s).split("\n"),i=0;i<d.length-1;++i){var u=d[i].trim();if(u.length>0)try{var m=JSON.parse(u);a.enqueue(m)}catch(e){return a.error(e),n=!0,void t.cancel()}}return o=d[d.length-1],t.read().then(e)}if(!n){if(0!==(o=o.trim()).length)try{var l=JSON.parse(o);a.enqueue(l)}catch(e){return void a.error(e)}a.close()}})},cancel:function(e){console.log("Cancel registered due to ",e),n=!0,r.cancel()}})},canNdjsonStream=namespace.ndjsonStream=ndjsonStream;export{canNdjsonStream as a,canNdjsonStream as b};
//# sourceMappingURL=chunk-40ce4720.js.map
