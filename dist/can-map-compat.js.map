{"version":3,"file":"can-map-compat.js","sources":["../node_modules/can-map-compat/can-map-compat.js"],"sourcesContent":["var canKey = require(\"can-key\");\nvar canReflect = require(\"can-reflect\");\nvar canLog = require(\"can-log\");\n\nfunction makeCompat(Type, enableWarning) {\n\tvar proto = Type.prototype;\n\tvar isDefined = typeof proto.attr === \"function\";\n\n\tif(isDefined) {\n\t\treturn Type;\n\t}\n\n\t// Whether we should be warning when this is used.\n\tvar warnOnUse = enableWarning === true;\n\n\tproto.attr = function(key, value) {\n\t\tif(warnOnUse) {\n\t\t\tcanLog.warn(\"can-map-compat is intended for migrating away from can-map. Remove all uses of .attr() to remove this warning.\");\n\t\t}\n\n\t\tvar type = typeof key;\n\t\tvar argsLen = arguments.length;\n\n\t\t// map.attr()\n\t\tif(argsLen === 0) {\n\t\t\treturn canReflect.unwrap(this);\n\t\t}\n\t\t// map.attr({ key: val })\n\t\telse if(type !== \"string\" && type !== \"number\") {\n\t\t\t// Remove others\n\t\t\tif(value === true) {\n\t\t\t\tcanReflect.updateDeep(this, key);\n\t\t\t} else {\n\t\t\t\tcanReflect.assignDeep(this, key);\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\t// map.attr(key)\n\t\telse if(argsLen === 1) {\n\t\t\treturn canKey.get(this, key);\n\t\t}\n\t\t// map.attr(key, val)\n\t\telse {\n\t\t\tcanKey.set(this, key, value);\n\t\t\treturn this;\n\t\t}\n\t};\n\n\tproto.removeAttr = function(key) {\n\t\tvar val = canReflect.getKeyValue(this, key);\n\t\tcanReflect.deleteKeyValue(this, key);\n\t\treturn val;\n\t};\n\n\treturn Type;\n}\n\nexports = module.exports = function(Type) {\n\treturn makeCompat(Type, true);\n};\n\nexports.makeCompat = makeCompat;\n"],"names":["makeCompat","Type","enableWarning","proto","prototype","attr","warnOnUse","key","value","canLog","warn","type","argsLen","arguments","length","canReflect","unwrap","this","updateDeep","assignDeep","canKey","get","set","removeAttr","val","getKeyValue","deleteKeyValue","module"],"mappings":"8kBAIA,SAASA,EAAWC,EAAMC,GACzB,IAAIC,EAAQF,EAAKG,UAGjB,GAFsC,mBAAfD,EAAME,KAG5B,OAAOJ,EAIR,IAAIK,GAA8B,IAAlBJ,EAyChB,OAvCAC,EAAME,KAAO,SAASE,EAAKC,GACvBF,GACFG,OAAOC,KAAK,kHAGb,IAAIC,SAAcJ,EACdK,EAAUC,UAAUC,OAGxB,OAAe,IAAZF,EACKG,WAAWC,OAAOC,MAGT,WAATN,GAA8B,WAATA,IAEf,IAAVH,EACFO,WAAWG,WAAWD,KAAMV,GAE5BQ,WAAWI,WAAWF,KAAMV,GAEtBU,MAGY,IAAZL,EACAQ,OAAOC,IAAIJ,KAAMV,IAIxBa,OAAOE,IAAIL,KAAMV,EAAKC,GACfS,OAITd,EAAMoB,WAAa,SAAShB,GAC3B,IAAIiB,EAAMT,WAAWU,YAAYR,KAAMV,GAEvC,OADAQ,WAAWW,eAAeT,KAAMV,GACzBiB,GAGDvB,GAGE0B,UAAiB,SAAS1B,GACnC,OAAOD,EAAWC,GAAM,gBAGJD"}