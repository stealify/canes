import"./chunk-5f1245ff.mjs";import{a as canReflect}from"./chunk-7e0220de.mjs";var slice=[].slice;function defaultIdentity(e,t){return e===t}function makeIdentityFromMapSchema(e){return e.identity&&e.identity.length?function(t,n){return canReflect.getIdentity(t,e)===canReflect.getIdentity(n,e)}:defaultIdentity}function makeIdentityFromListSchema(e){return null!=e.values?makeIdentityFromMapSchema(canReflect.getSchema(e.values)):defaultIdentity}function makeIdentity(e,t){var n,i=canReflect.getSchema(e);if(null!=i){if(null==i.values)return defaultIdentity;n=canReflect.getSchema(i.values)}return null==n&&t>0&&(n=canReflect.getSchema(canReflect.getKeyValue(e,0))),n?makeIdentityFromMapSchema(n):defaultIdentity}function reverseDiff(e,t,n,i,l){for(var a=n.length-1,c=i.length-1;a>e&&c>t;){if(!l(n[a],i[c],a))return[{type:"splice",index:t,deleteCount:a-e+1,insert:slice.call(i,t,c+1)}];a--,c--}return[{type:"splice",index:t,deleteCount:a-e+1,insert:slice.call(i,t,c+1)}]}var list=function(e,t,n){var i,l=0,a=0,c=canReflect.size(e),r=canReflect.size(t),u=[];for(i="function"===typeof n?n:null!=n?"map"===n.type?makeIdentityFromMapSchema(n):makeIdentityFromListSchema(n):makeIdentity(e,c);l<c&&a<r;){var f=e[l],s=t[a];if(i(f,s,l))l++,a++;else if(a+1<r&&i(f,t[a+1],l))u.push({index:a,deleteCount:0,insert:[t[a]],type:"splice"}),l++,a+=2;else{if(!(l+1<c&&i(e[l+1],s,l+1)))return u.push.apply(u,reverseDiff(l,a,e,t,i)),u;u.push({index:a,deleteCount:1,insert:[],type:"splice"}),l+=2,a++}}return a===r&&l===c?u:(u.push({type:"splice",index:a,deleteCount:c-l,insert:slice.call(t,a)}),u)};export{list as a};
//# sourceMappingURL=chunk-3f0a7243.js.map
